<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>algorithm | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="基础递归斐波那契算法 12345678Fib1(int n)&amp;#123;  if(n&lt;1)    return -1;  if(n&#x3D;&#x3D;1||n&#x3D;&#x3D;2)    return 1;  return Fib1(n-1)+Fib1(n-2);&amp;#125;  迭代斐波那契算法 12345678910111213141516Fib2(int n)&amp;#123;    int i,s1,s2;    if(">
<meta property="og:type" content="article">
<meta property="og:title" content="algorithm">
<meta property="og:url" content="http://example.com/2021/12/28/algorithm/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="基础递归斐波那契算法 12345678Fib1(int n)&amp;#123;  if(n&lt;1)    return -1;  if(n&#x3D;&#x3D;1||n&#x3D;&#x3D;2)    return 1;  return Fib1(n-1)+Fib1(n-2);&amp;#125;  迭代斐波那契算法 12345678910111213141516Fib2(int n)&amp;#123;    int i,s1,s2;    if(">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-28T01:58:05.352Z">
<meta property="article:modified_time" content="2021-12-28T01:39:20.186Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-algorithm" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/12/28/algorithm/" class="article-date">
  <time class="dt-published" datetime="2021-12-28T01:58:05.352Z" itemprop="datePublished">2021-12-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      algorithm
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><p>递归斐波那契算法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Fib1</span>(<span class="keyword">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span>(n&lt;<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">if</span>(n==<span class="number">1</span>||n==<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Fib1</span>(n<span class="number">-1</span>)+<span class="built_in">Fib1</span>(n<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>迭代斐波那契算法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Fib2</span>(<span class="keyword">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> i,s1,s2;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>||n==<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    s1=<span class="number">1</span>;</span><br><span class="line">    s2=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">3</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s2=s1+s2;</span><br><span class="line">        s1=s2-s1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="贪心算法"><a href="#贪心算法" class="headerlink" title="贪心算法"></a>贪心算法</h1><p>基本流程:决定贪心策略-&gt;得到局部最优解-&gt;得到全局最优解</p>
<h2 id="最优装载问题"><a href="#最优装载问题" class="headerlink" title="最优装载问题"></a>最优装载问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">double</span> w[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> c;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入船的最大载重c和古董数量n&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;c&gt;&gt;n;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请逐个输入古董的重量&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin&gt;&gt;w[i];</span><br><span class="line">    <span class="built_in">sort</span>(w,w+n);</span><br><span class="line">    <span class="keyword">double</span> temp=<span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        temp+=w[i];</span><br><span class="line">        <span class="keyword">if</span>(tmp&lt;c)</span><br><span class="line">            ans++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;最多可装下&quot;</span>;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">10000</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">three</span>&#123;</span></span><br><span class="line">    <span class="keyword">double</span> w;</span><br><span class="line">    <span class="keyword">double</span> v;</span><br><span class="line">    <span class="keyword">double</span> p;</span><br><span class="line">&#125;s[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(three a,three b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.p&gt;b.p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">double</span> m;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;输入宝物的数量n和毛驴的承载能力m&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;逐个输入宝物的重量w和价值v&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;s[i].w&gt;&gt;s[i].v;</span><br><span class="line">        s[i].p=s[i].v/s[i].w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(s,s+n,cmp);</span><br><span class="line">    <span class="keyword">double</span> sum=<span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m&gt;s[i].w)</span><br><span class="line">        &#123;</span><br><span class="line">            m-=s[i].w;</span><br><span class="line">            sum+=s[i].v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            sum+=m*s[i].p;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;可装载最大价值&quot;</span>&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="会议安排"><a href="#会议安排" class="headerlink" title="会议安排"></a>会议安排</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Meet</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> beg;</span><br><span class="line">    <span class="keyword">int</span> end;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">&#125;meet[<span class="number">100</span>];</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">setMeet</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> n,ans;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMeet::init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s,e;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入会议总数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;输入会议的开始和结束时间:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">        meet[i].beg=s;</span><br><span class="line">        meet[i].end=e;</span><br><span class="line">        meet[i].num=i+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Meet x,Meet y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x.end==y.end)</span><br><span class="line">        <span class="keyword">return</span> x.beg&gt;y.beg;</span><br><span class="line">    <span class="keyword">return</span> x.beg&lt;y.beg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMeet::solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">sort</span>(meet,meet+n,cmp);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;排序完成的会议时间如下:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;会议编号&quot;</span>&lt;&lt;<span class="string">&quot;  开始时间&quot;</span>&lt;&lt;<span class="string">&quot;  结束时间&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;meet[i].num&lt;&lt;<span class="string">&quot;\t&quot;</span>&lt;&lt;meet[i].beg&lt;&lt;<span class="string">&quot;\t&quot;</span>&lt;&lt;meet[i].end&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;选择会议的过程:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;选择第&quot;</span>&lt;&lt;meet[<span class="number">0</span>].num&lt;&lt;<span class="string">&quot;个会议&quot;</span>&lt;&lt;endl;</span><br><span class="line">    ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> last=meet[<span class="number">0</span>].end;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(meet[i].beg&gt;=last)</span><br><span class="line">        &#123;</span><br><span class="line">            ans++;</span><br><span class="line">            last=meet[i].end;</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;选择第&quot;</span>&lt;&lt;meet[i].num&lt;&lt;<span class="string">&quot;个会议&quot;</span>&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;最多可安排&quot;</span>&lt;&lt;ans&lt;&lt;<span class="string">&quot;个会议&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    setMeet sm;</span><br><span class="line">    sm.<span class="built_in">init</span>();</span><br><span class="line">    sm.<span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a>最短路径</h2><h3 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1e7</span>;</span><br><span class="line"><span class="keyword">int</span> map[N][N],dist[N],p[N],n,m;</span><br><span class="line"><span class="keyword">bool</span> flag[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		dist[i]=map[u][i];</span><br><span class="line">		flag[i]=<span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(dist[i]==INF)</span><br><span class="line">			p[i]=<span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			p[i]=u;</span><br><span class="line">	&#125;</span><br><span class="line">	dist[u]=<span class="number">0</span>;</span><br><span class="line">	flag[u]=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span>  temp=INF,t=u;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j++)</span><br><span class="line">			<span class="keyword">if</span>(!flag[j]&amp;&amp;dist[i]&lt;temp)</span><br><span class="line">			&#123;</span><br><span class="line">				t=j;</span><br><span class="line">				temp=dist[j];</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">if</span>(t==u) <span class="keyword">return</span>;</span><br><span class="line">		flag[t]=<span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			<span class="keyword">if</span>(!flag[j]&amp;&amp;map[t][j]&lt;INF)</span><br><span class="line">				<span class="keyword">if</span>(dist[j]&gt;(dist[t]+map[t][j]))</span><br><span class="line">				&#123;</span><br><span class="line">					dist[j]=dist[t]+map[t][j];</span><br><span class="line">					p[j]=t;</span><br><span class="line">				&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w,st;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;color 0d&quot;</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入城市的个数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入城市之间路线的个数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入城市之间的路线及距离:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			map[i][j]=INF;</span><br><span class="line">	<span class="keyword">while</span>(m--)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		map[u][v]=<span class="built_in">min</span>(map[u][v],w);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入所在位置:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;st;</span><br><span class="line">	<span class="built_in">Dijkstra</span>(st);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;当前所在位置:&quot;</span>&lt;&lt;st&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;当前:&quot;</span>&lt;&lt;st&lt;&lt;<span class="string">&quot; - &quot;</span>&lt;&lt;<span class="string">&quot;要去的位置:&quot;</span>&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">if</span>(dist[i]==INF)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;sorry,no way&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;最短距离为:&quot;</span>&lt;&lt;dist[i]&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用优先队列优化的Dijkstra算法"><a href="#使用优先队列优化的Dijkstra算法" class="headerlink" title="使用优先队列优化的Dijkstra算法"></a>使用优先队列优化的Dijkstra算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1e7</span>;</span><br><span class="line"><span class="keyword">int</span> map[N][N],dist[N],n,m;</span><br><span class="line"><span class="keyword">int</span> flag[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> u,step;</span><br><span class="line">	<span class="built_in">Node</span>()&#123;&#125;;</span><br><span class="line">	<span class="built_in">Node</span>(<span class="keyword">int</span> a,<span class="keyword">int</span> sp)&#123;</span><br><span class="line">		u=a;step=sp;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node&amp; a)<span class="keyword">const</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> step&gt;a.step;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> st)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	priority_queue&lt;Node&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(<span class="built_in">Node</span>(st,<span class="number">0</span>));</span><br><span class="line">	<span class="built_in">memset</span>(flag,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(flag));</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		dist[i]=INF;</span><br><span class="line">	dist[st]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		Node it=Q.<span class="built_in">top</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">int</span> t=it.u;</span><br><span class="line">		<span class="keyword">if</span>(flag[t])</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		flag[t]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!flag[i]&amp;&amp;map[t][i]&lt;INF)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(dist[i]&gt;dist[t]+map[t][i])</span><br><span class="line">				&#123;</span><br><span class="line">					dist[i]=dist[t]+map[t][i];</span><br><span class="line">					Q.<span class="built_in">push</span>(<span class="built_in">Node</span>(i,dist[i]));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w,st;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;color 0d&quot;</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入城市的个数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入城市之间路线的个数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入城市之间的路线及距离:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			map[i][j]=INF;</span><br><span class="line">	<span class="keyword">while</span>(m--)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		map[u][v]=<span class="built_in">min</span>(map[u][v],w);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入所在位置:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;st;</span><br><span class="line">	<span class="built_in">Dijkstra</span>(st);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;当前所在位置:&quot;</span>&lt;&lt;st&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;当前:&quot;</span>&lt;&lt;st&lt;&lt;<span class="string">&quot; - &quot;</span>&lt;&lt;<span class="string">&quot;要去的位置:&quot;</span>&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">if</span>(dist[i]==INF)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;sorry,no way&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;最短距离为:&quot;</span>&lt;&lt;dist[i]&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="霍夫曼编码"><a href="#霍夫曼编码" class="headerlink" title="霍夫曼编码"></a>霍夫曼编码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXBIT 100</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXVALUE 1000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXLEAF 30</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXNODE MAXLEAF*2-1</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> //定义节点</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">double</span> weight;</span><br><span class="line">	<span class="keyword">int</span> parent;</span><br><span class="line">	<span class="keyword">int</span> lchild;</span><br><span class="line">	<span class="keyword">int</span> rchild;</span><br><span class="line">	<span class="keyword">char</span> value;</span><br><span class="line">&#125;HNodeType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> //定义编码类型</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> bit[MAXBIT]; <span class="comment">//存储01编码的数组</span></span><br><span class="line">	<span class="keyword">int</span> start; <span class="comment">//编码在数组中开始的位置,从最后往前减小</span></span><br><span class="line">&#125;HCodeType;</span><br><span class="line">HNodeType HuffNode[MAXNODE]; <span class="comment">//定义一个足够大的节点数组</span></span><br><span class="line">HCodeType HuffCode[MAXLEAF]; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HuffmanTree</span> <span class="params">(HNodeType HuffNode[MAXNODE],<span class="keyword">int</span> n)</span> <span class="comment">//构造霍夫曼树</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,x1,x2;</span><br><span class="line">	<span class="keyword">double</span> m1,m2;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>*n<span class="number">-1</span>;i++) <span class="comment">//初始化节点数据</span></span><br><span class="line">	&#123;</span><br><span class="line">		HuffNode[i].weight = <span class="number">0</span>;</span><br><span class="line">		HuffNode[i].parent = <span class="number">-1</span>;</span><br><span class="line">		HuffNode[i].lchild = <span class="number">-1</span>;</span><br><span class="line">		HuffNode[i].rchild = <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++) <span class="comment">//输入节点数据</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;please input the value and weight of leaf node &quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;endl;</span><br><span class="line">		cin&gt;&gt;HuffNode[i].value&gt;&gt;HuffNode[i].weight;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++) <span class="comment">//循环合并n-1次</span></span><br><span class="line">	&#123;</span><br><span class="line">		m1=m2=MAXVALUE; </span><br><span class="line">		x1=x2=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;n+i;j++) <span class="comment">//在已有的节点里找权重最小的且没有parent的节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(HuffNode[j].weight&lt;m1&amp;&amp;HuffNode[j].parent==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				m2=m1;</span><br><span class="line">				x2=x1;</span><br><span class="line">				m1=HuffNode[j].weight;</span><br><span class="line">				x1=j;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (HuffNode[j].weight&lt;m2&amp;&amp;HuffNode[j].parent==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				m2=HuffNode[j].weight;</span><br><span class="line">				x2=j;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="comment">//最后m1,m2为最新权重节点的权重,x1,x2为其位置</span></span><br><span class="line">		HuffNode[x1].parent=n+i;</span><br><span class="line">		HuffNode[x2].parent=n+i;</span><br><span class="line">		HuffNode[n+i].weight=m1+m2;</span><br><span class="line">		HuffNode[n+i].lchild=x1;</span><br><span class="line">		HuffNode[n+i].rchild=x2;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;x1.weight and x2.weight in round &quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot;\t&quot;</span>&lt;&lt;HuffNode[x1].weight&lt;&lt;<span class="string">&quot;\t&quot;</span>&lt;&lt;HuffNode[x2].weight&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HuffmanCode</span><span class="params">(HCodeType HuffCode[MAXLEAF],<span class="keyword">int</span> n)</span> <span class="comment">//对生成的树进行编码</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HCodeType cd; <span class="comment">//临时结构体</span></span><br><span class="line">	<span class="keyword">int</span> i,j,c,p;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cd.start=n<span class="number">-1</span>;</span><br><span class="line">		c=i;</span><br><span class="line">		p=HuffNode[c].parent; <span class="comment">//p为遍历过程中每个节点的parent值</span></span><br><span class="line">		<span class="keyword">while</span>(p!=<span class="number">-1</span>) <span class="comment">//如果未到根节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(HuffNode[p].lchild==c) <span class="comment">//为parent的左节点则在该处编码为0</span></span><br><span class="line">				cd.bit[cd.start]=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				cd.bit[cd.start]=<span class="number">1</span>;</span><br><span class="line">			cd.start--; <span class="comment">//编码长度加1,start位置减1</span></span><br><span class="line">			c=p;</span><br><span class="line">			p=HuffNode[c].parent;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(j=cd.start+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">			HuffCode[i].bit[j]=cd.bit[j]; </span><br><span class="line">		HuffCode[i].start=cd.start; <span class="comment">//将临时变量复制到编码结构体</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="built_in">HuffmanTree</span>(HuffNode,n);</span><br><span class="line">	<span class="built_in">HuffmanCode</span>(HuffCode,n);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;HuffNode[i].value&lt;&lt;<span class="string">&quot; :Huffman code is: &quot;</span>;</span><br><span class="line">		<span class="keyword">for</span>(j=HuffCode[i].start+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">			cout&lt;&lt;HuffCode[i].bit[j];</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><p>子图:从原图中选中一些顶点和边组成的图.</p>
<p>生成子图:选中一些边和所有顶点组成的图.</p>
<p>生成树:正好是一棵树的生成子图.</p>
<p>最小生成树:权值之和最小的生成树.</p>
<h3 id="Prim算法"><a href="#Prim算法" class="headerlink" title="Prim算法"></a>Prim算法</h3><p>复杂度:O(n^2)<br>$$</p>
<p>$$</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e4</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">bool</span> s[N];</span><br><span class="line"><span class="keyword">int</span> closest[N]; <span class="comment">//存储U集合中离U-V集合中最近的点</span></span><br><span class="line"><span class="keyword">int</span> lowcost[N]; <span class="comment">//最近点间的距离</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prim</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> u0,<span class="keyword">int</span> c[N][N])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	s[u0]=<span class="literal">true</span>; <span class="comment">//初始值在U集合中</span></span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) <span class="comment">//初始化lowcost和closest数组</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(i!=u0)</span><br><span class="line">		&#123;</span><br><span class="line">			lowcost[i]=c[u0][i];</span><br><span class="line">			closest[i]=u0;</span><br><span class="line">			s[i]=<span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			lowcost[i]=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = INF;</span><br><span class="line">		<span class="keyword">int</span> t=u0;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n;j++) <span class="comment">//在集合U-V中找到离集合U中最近的点</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!s[j]&amp;&amp;(lowcost[j]&lt;temp))</span><br><span class="line">			&#123;</span><br><span class="line">				t=j;</span><br><span class="line">				temp=lowcost[j];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(t==u0)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		s[t]=<span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n;j++) <span class="comment">//更新closest和lowcost数组</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!s[j]&amp;&amp;(c[t][j]&lt;lowcost[j]))</span><br><span class="line">			&#123;</span><br><span class="line">				lowcost[j]=c[t][j];</span><br><span class="line">				closest[j]=t;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,c[N][N],m,u,v,w;</span><br><span class="line">	<span class="keyword">int</span> u0;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入节点数n和边数m:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">int</span> sumcost=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			c[i][j]=INF;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点数u,v和边值w:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		c[u][v]=c[v][u]=w;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入任一节点u0:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;u0;</span><br><span class="line">	<span class="built_in">Prim</span>(n,u0,c);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;数组lowcost的内容为:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;lowcost[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		sumcost+=lowcost[i];</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最小的花费是:&quot;</span>&lt;&lt;sumcost&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Kruskal算法"><a href="#Kruskal算法" class="headerlink" title="Kruskal算法"></a>Kruskal算法</h3><p>复杂度:O(e*logn)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> nodeset[N];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> u;</span><br><span class="line">	<span class="keyword">int</span> v;</span><br><span class="line">	<span class="keyword">int</span> w;</span><br><span class="line">&#125;e[N*N]; <span class="comment">//边集</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Edge x,Edge y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x.w&lt;y.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">(<span class="keyword">int</span> n)</span> <span class="comment">//初始化点集,每个点为一个集合</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		nodeset[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Merge</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> <span class="comment">//避圈法,若线的两端在同一点集里,则会产生回路,应避免</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> p=nodeset[a];</span><br><span class="line">	<span class="keyword">int</span> q=nodeset[b];</span><br><span class="line">	<span class="keyword">if</span>(p==q)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="comment">//将所有连接在一起的点构成同一点集</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(nodeset[i]==q)</span><br><span class="line">			nodeset[i]=p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kurskal</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">Merge</span>(e[i].u,e[i].v))</span><br><span class="line">		&#123;</span><br><span class="line">			ans+=e[i].w;</span><br><span class="line">			n--;</span><br><span class="line">			<span class="keyword">if</span>(n==<span class="number">1</span>)</span><br><span class="line">				<span class="keyword">return</span> ans;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点数n和边数m:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="built_in">Init</span>(n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点数u,v和边值w:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		cin&gt;&gt;e[i].u&gt;&gt;e[i].v&gt;&gt;e[i].w;</span><br><span class="line">	<span class="built_in">sort</span>(e,e+m,cmp);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="built_in">Kurskal</span>(n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最小花费是:&quot;</span>&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="并查集改进的Kruskal算法"><a href="#并查集改进的Kruskal算法" class="headerlink" title="并查集改进的Kruskal算法"></a>并查集改进的Kruskal算法</h3><p>复杂度:O(n^2)<br>$$</p>
<p>$$</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> father[N];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> u;</span><br><span class="line">	<span class="keyword">int</span> v;</span><br><span class="line">	<span class="keyword">int</span> w;</span><br><span class="line">&#125;e[N*N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Edge x,Edge y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x.w&lt;y.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		father[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x!=father[x])</span><br><span class="line">		father[x]=<span class="built_in">Find</span>(father[x]);</span><br><span class="line">	<span class="keyword">return</span> father[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Merge</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> p = <span class="built_in">Find</span>(a);</span><br><span class="line">	<span class="keyword">int</span> q = <span class="built_in">Find</span>(b);</span><br><span class="line">	<span class="keyword">if</span>(p==q)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span>(p&gt;q)</span><br><span class="line">		father[p]=q;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		father[q]=p;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kurskal</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">Merge</span>(e[i].u,e[i].v))</span><br><span class="line">		&#123;</span><br><span class="line">			ans+=e[i].w;</span><br><span class="line">			n--;</span><br><span class="line">			<span class="keyword">if</span>(n==<span class="number">1</span>)</span><br><span class="line">				<span class="keyword">return</span> ans;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点数n和边数m:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="built_in">Init</span>(n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点数u,v和边值w:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		cin&gt;&gt;e[i].u&gt;&gt;e[i].v&gt;&gt;e[i].w;</span><br><span class="line">	<span class="built_in">sort</span>(e,e+m,cmp);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="built_in">Kurskal</span>(n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最小花费是:&quot;</span>&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="分治法"><a href="#分治法" class="headerlink" title="分治法"></a>分治法</h1><h2 id="二分搜索"><a href="#二分搜索" class="headerlink" title="二分搜索"></a>二分搜索</h2><h3 id="循环搜索"><a href="#循环搜索" class="headerlink" title="循环搜索"></a>循环搜索</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> x,n,i;</span><br><span class="line"><span class="keyword">int</span> s[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BinarySearch</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> s[],<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> low=<span class="number">0</span>,high=n<span class="number">-1</span>,middle;</span><br><span class="line">	<span class="keyword">while</span>(low&lt;=high)</span><br><span class="line">	&#123;</span><br><span class="line">		middle=(low+high)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(x==s[middle])</span><br><span class="line">			<span class="keyword">return</span> middle;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(x&lt;s[middle])</span><br><span class="line">			high=middle<span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			low=middle+<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入数列元素个数n:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">while</span>(cin&gt;&gt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;依次输入数列元素:&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">			cin&gt;&gt;s[i];</span><br><span class="line">		<span class="built_in">sort</span>(s,s+n);</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;排序后的数组:&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">			cout&lt;&lt;s[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;输入要查找的元素:&quot;</span>&lt;&lt;endl;</span><br><span class="line">		cin&gt;&gt;x;</span><br><span class="line">		i=<span class="built_in">BinarySearch</span>(n,s,x);</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;没有查找到&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;查找的元素在第&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot;位&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="递归搜索"><a href="#递归搜索" class="headerlink" title="递归搜索"></a>递归搜索</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">recursionBS</span><span class="params">(<span class="keyword">int</span> s[],<span class="keyword">int</span> x,<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(low&gt;high)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">int</span> middle=(low+high)/<span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(x==s[middle])</span><br><span class="line">		<span class="keyword">return</span> middle;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(s&lt;s[middle])</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">recursionBS</span>(s,x,low,middle<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">recursionBS</span>(s,x,middle+<span class="number">1</span>,high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="合并排序"><a href="#合并排序" class="headerlink" title="合并排序"></a>合并排序</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;algorithm&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Merge</span><span class="params">(<span class="keyword">int</span> A[],<span class="keyword">int</span> low,<span class="keyword">int</span> mid,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *B=<span class="keyword">new</span> <span class="keyword">int</span>[high-low+<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">int</span> i=low,j=mid+<span class="number">1</span>,k=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=mid&amp;&amp;j&lt;=high)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(A[i]&lt;=A[j])</span><br><span class="line">			B[k++]=A[i++];</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			B[k++]=A[j++];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=mid)</span><br><span class="line">		B[k++]=A[i++];</span><br><span class="line">	<span class="keyword">while</span>(j&lt;=high)</span><br><span class="line">		B[k++]=A[j++];</span><br><span class="line">	<span class="keyword">for</span>(i=low,k=<span class="number">0</span>;i&lt;=high;i++)</span><br><span class="line">		A[i]=B[k++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort</span><span class="params">(<span class="keyword">int</span> A[],<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(low&lt;high)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> mid=(low+high)/<span class="number">2</span>;</span><br><span class="line">		<span class="built_in">MergeSort</span>(A,low,mid);</span><br><span class="line">		<span class="built_in">MergeSort</span>(A,mid+<span class="number">1</span>,high);</span><br><span class="line">		<span class="built_in">Merge</span>(A,low,mid,high);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,A[<span class="number">100</span>];</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入元素个数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入每个元素:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">		cin&gt;&gt;A[i];</span><br><span class="line">	<span class="built_in">MergeSort</span>(A,<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;合并排序结果为:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">		cout&lt;&lt;A[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><h4 id="原始"><a href="#原始" class="headerlink" title="原始"></a>原始</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Partition</span><span class="params">(<span class="keyword">int</span> r[],<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=low,j=high,pivot=r[low];</span><br><span class="line">	<span class="keyword">while</span>(i&lt;j)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(i&lt;j&amp;&amp;r[j]&gt;pivot) j--;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;j)</span><br><span class="line">			<span class="built_in">swap</span>(r[i++],r[j]);</span><br><span class="line">		<span class="keyword">while</span>(i&lt;j&amp;&amp;r[i]&lt;=pivot) i++;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;j)</span><br><span class="line">			<span class="built_in">swap</span>(r[i],r[j--]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort</span><span class="params">(<span class="keyword">int</span> r[],<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> mid;</span><br><span class="line">	<span class="keyword">if</span>(low&lt;high)</span><br><span class="line">	&#123;</span><br><span class="line">		mid=<span class="built_in">Partition</span>(r,low,high);</span><br><span class="line">		<span class="built_in">QuickSort</span>(r,low,mid<span class="number">-1</span>);</span><br><span class="line">		<span class="built_in">QuickSort</span>(r,mid+<span class="number">1</span>,high);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,A[<span class="number">100</span>];</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入元素个数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入每个元素:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">		cin&gt;&gt;A[i];</span><br><span class="line">	<span class="built_in">QuickSort</span>(A,<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;快速排序结果为:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">		cout&lt;&lt;A[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>可减少交换次数,提高效率</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Partition2</span><span class="params">(<span class="keyword">int</span> r[],<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=low,j=high,pivot=r[low];</span><br><span class="line">	<span class="keyword">while</span>(i&lt;j)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(i&lt;j&amp;&amp;r[j]&gt;pivot)</span><br><span class="line">			j--;</span><br><span class="line">		<span class="keyword">while</span>(i&lt;j&amp;&amp;r[i]&lt;=pivot)</span><br><span class="line">			i++;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;j)</span><br><span class="line">			<span class="built_in">swap</span>(r[i++],r[j--]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(r[i]&gt;pivot)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">swap</span>(r[i<span class="number">-1</span>],r[low]);</span><br><span class="line">		<span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">swap</span>(r[i],r[low]);</span><br><span class="line">	<span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="大整数乘法"><a href="#大整数乘法" class="headerlink" title="大整数乘法"></a>大整数乘法</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">char</span> sa[<span class="number">100</span>],sb[<span class="number">100</span>];</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> s[M];</span><br><span class="line">	<span class="keyword">int</span> l;</span><br><span class="line">	<span class="keyword">int</span> c;</span><br><span class="line">&#125;Node,*pNode;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cp</span><span class="params">(pNode src,pNode des,<span class="keyword">int</span> st,<span class="keyword">int</span> l)</span> <span class="comment">//拆分函数,st为起点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=st,j=<span class="number">0</span>;i&lt;st+l;i++,j++)</span><br><span class="line">		des-&gt;s[j]=src-&gt;s[i];</span><br><span class="line">	des-&gt;l=l;</span><br><span class="line">	des-&gt;c=st+src-&gt;c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(pNode pa,pNode pb,pNode ans)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,cc,k,palen,pblen,len;</span><br><span class="line">	<span class="keyword">int</span> ta,tb;</span><br><span class="line">	pNode temp;</span><br><span class="line">	<span class="keyword">if</span>((pa-&gt;c)&lt;(pb-&gt;c)) <span class="comment">//保证幂指数较大的为pa</span></span><br><span class="line">	&#123;</span><br><span class="line">		temp=pa;</span><br><span class="line">		pa=pb;</span><br><span class="line">		pb=temp;</span><br><span class="line">	&#125;</span><br><span class="line">	ans-&gt;c=pb-&gt;c; <span class="comment">//结果的幂指数等于较小的幂指数</span></span><br><span class="line">	cc=<span class="number">0</span>; <span class="comment">//进位初始为0</span></span><br><span class="line">	palen=pa-&gt;l+pa-&gt;c; </span><br><span class="line">	pblen=pb-&gt;l+pb-&gt;c;</span><br><span class="line">	<span class="keyword">if</span>(palen&lt;pblen)</span><br><span class="line">		len=pblen; </span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		len=palen; <span class="comment">//总的长度为最长的那一个</span></span><br><span class="line">	k=pa-&gt;c-pb-&gt;c; <span class="comment">//pa需要补充的0的个数</span></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len-ans-&gt;c;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;k) <span class="comment">//pa的前k位都是补充的0</span></span><br><span class="line">			ta=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			ta=pa-&gt;s[i-k];</span><br><span class="line">		<span class="keyword">if</span>(i&lt; pb-&gt;l)</span><br><span class="line">			tb=pb-&gt;s[i];</span><br><span class="line">		<span class="keyword">else</span> <span class="comment">//超过pb长度的位pb的值都是0</span></span><br><span class="line">			tb=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(i&gt;=pa-&gt;l+k) <span class="comment">//超过pa长度的位pa的值都是0</span></span><br><span class="line">			ta=<span class="number">0</span>;</span><br><span class="line">		ans-&gt;s[i]=(ta+tb+cc)%<span class="number">10</span>;</span><br><span class="line">		cc=(ta+tb+cc)/<span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(cc)</span><br><span class="line">		ans-&gt;s[i++]=cc;</span><br><span class="line">	ans-&gt;l=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mul</span><span class="params">(pNode pa,pNode pb,pNode ans)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,cc,w;</span><br><span class="line">	<span class="keyword">int</span> ma=pa-&gt;l&gt;&gt;<span class="number">1</span>,mb=pb-&gt;l&gt;&gt;<span class="number">1</span>;</span><br><span class="line">	Node ah,al,bh,bl;</span><br><span class="line">	Node t1,t2,t3,t4,z;</span><br><span class="line">	pNode temp;</span><br><span class="line">	<span class="keyword">if</span>(!ma||!mb) <span class="comment">//当pa或pb有一个只有1位时开始乘法</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(!ma) <span class="comment">//保证pa为较大值</span></span><br><span class="line">		&#123;</span><br><span class="line">			temp=pa;</span><br><span class="line">			pa=pb;</span><br><span class="line">			pb=temp;</span><br><span class="line">		&#125;</span><br><span class="line">		ans-&gt;c=pa-&gt;c+pb-&gt;c; <span class="comment">//结果的幂指数=两个乘数的幂指数之和</span></span><br><span class="line">		w=pb-&gt;s[<span class="number">0</span>]; <span class="comment">//pb只有1位,用常数表示</span></span><br><span class="line">		cc=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;pa-&gt;l;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			ans-&gt;s[i]=(w*pa-&gt;s[i]+cc)%<span class="number">10</span>;</span><br><span class="line">			cc=(w*pa-&gt;s[i]+cc)/<span class="number">10</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(cc)</span><br><span class="line">			ans-&gt;s[i++]=cc; <span class="comment">//最后的进位填进数组最后</span></span><br><span class="line">		ans-&gt;l=i;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cp</span>(pa,&amp;ah,ma,pa-&gt;l-ma);</span><br><span class="line">	<span class="built_in">cp</span>(pa,&amp;al,<span class="number">0</span>,ma);</span><br><span class="line">	<span class="built_in">cp</span>(pb,&amp;bh,mb,pb-&gt;l-mb);</span><br><span class="line">	<span class="built_in">cp</span>(pb,&amp;bl,<span class="number">0</span>,mb);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">mul</span>(&amp;ah,&amp;bh,&amp;t1);</span><br><span class="line">	<span class="built_in">mul</span>(&amp;ah,&amp;bl,&amp;t2);</span><br><span class="line">	<span class="built_in">mul</span>(&amp;al,&amp;bh,&amp;t3);</span><br><span class="line">	<span class="built_in">mul</span>(&amp;al,&amp;bl,&amp;t4);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">add</span>(&amp;t3,&amp;t4,ans);</span><br><span class="line">	<span class="built_in">add</span>(&amp;t2,ans,&amp;z);</span><br><span class="line">	<span class="built_in">add</span>(&amp;t1,&amp;z,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Node ans,a,b;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入大数1:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;sa;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入大数2:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;sb;</span><br><span class="line">	a.l=<span class="built_in">strlen</span>(sa);</span><br><span class="line">	b.l=<span class="built_in">strlen</span>(sb);</span><br><span class="line">	<span class="keyword">int</span> z=<span class="number">0</span>,i;</span><br><span class="line">	<span class="keyword">for</span>(i=a.l<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) <span class="comment">//把输入的字符转为数字并倒序存入数组</span></span><br><span class="line">		a.s[z++]=sa[i]-<span class="string">&#x27;0&#x27;</span>;  </span><br><span class="line">	a.c=<span class="number">0</span>;</span><br><span class="line">	z=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=b.l<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">		b.s[z++]=sb[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">	b.c=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">mul</span>(&amp;a,&amp;b,&amp;ans);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;结果为:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(i=ans.l<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">		cout&lt;&lt;ans.s[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="分治算法复杂度求解"><a href="#分治算法复杂度求解" class="headerlink" title="分治算法复杂度求解"></a>分治算法复杂度求解</h2><h3 id="递归树求解法"><a href="#递归树求解法" class="headerlink" title="递归树求解法"></a>递归树求解法</h3><p>$$<br>T(n)=<br>\begin{cases}<br>O(1), &amp;\text{$n$=1}\<br>aT(n/2)+O(n),&amp;\text{$n$&gt;1}<br>\end{cases}<br>$$</p>
<p>求解过程:<br>$$<br>\begin{align}<br>T(n)&amp;=aT(n/2)+O(n)\<br>&amp;=a(aT(n/2^2)+O(n/2))+O(n)\<br>&amp;=a^2T(n/2^2)+aO(n/2)+O(n)\<br>&amp;=a^2(aT(n/2^3)+O(n/2^2))+aO(n/2)+O(n)\<br>&amp;=a^3T(n/2^3)+a^2O(n/2^2)+aO(n/2)+O(n)\<br>&amp;=  …\<br>&amp;=a^xT(n/2^x)+a^xO(n/2^x)+…+aO(n/2)+O(n)\<br>&amp;=a^xT(n/2^x)+(\frac{a^x}{2^x}+\frac{a^{x-1}}{2^{x-1}}+…+1)O(n)<br>\end{align}<br>$$<br>令<br>$$<br>2^x=n<br>$$<br>则<br>$$<br>\begin{align}<br>T(n)&amp;=\frac{a^x}{2^x}O(1)+\frac{1-(\frac{a}{2})^x}{1-\frac{a}{2}}O(n)\<br>&amp;\approx\frac{a^x}{2^x}O(1)+((\frac{a}{2})^x-1)O(n)\<br>&amp;\approx(\frac{a}{2})^xO(n)\<br>&amp;= \frac{a^{logn}}{n}O(n)\<br>&amp;=a^{logn}O(1)\<br>&amp;=O(a^{logn})\<br>&amp;=O(n^{loga})<br>\end{align}<br>$$</p>
<h3 id="大师解法"><a href="#大师解法" class="headerlink" title="大师解法"></a>大师解法</h3><p>$$<br>T(n)=aT(n/b)+f(n)<br>$$</p>
<p>设<br>$$<br>f(n)=O(n^d)<br>$$<br>解得:<br>$$<br>T(n)=<br>\begin{cases}<br>O(n^d)&amp;\text{,公比$a/b^d&lt;1$}\<br>O(n^{\log_b{a}})&amp;\text{,公比$a/b^d&gt;1$}\<br>O(n^d\log_b{n})&amp;\text{,公比$a/b^d=1$}\<br>\end{cases}<br>$$</p>
<h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><p>分治算法是自顶向下解决问题,动态规划是自底向上解决问题.</p>
<p>适合用动态规划解决的问题的特征:</p>
<ul>
<li>最优子结构</li>
<li>子问题重叠(非必须)</li>
</ul>
<h2 id="最长公共子序列"><a href="#最长公共子序列" class="headerlink" title="最长公共子序列"></a>最长公共子序列</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100</span></span><br><span class="line"><span class="keyword">int</span> c[N][N],b[N][N];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">b[i][j]存储最优解的来源</span></span><br><span class="line"><span class="comment">b[i][j]=1:c[i][j]=c[i-1][j-1]+1</span></span><br><span class="line"><span class="comment">b[i][j]=2:c[i][j]=c[i][j-1]</span></span><br><span class="line"><span class="comment">b[i][j]=3:c[i][j]=c[i-1][j]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">char</span> s1[N],s2[N];</span><br><span class="line"><span class="keyword">int</span> len1,len2;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCSL</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=len1;i++)</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=len2;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(s1[i<span class="number">-1</span>]==s2[j<span class="number">-1</span>])</span><br><span class="line">			&#123;</span><br><span class="line">				c[i][j]=c[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line">				b[i][j]=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(c[i][j<span class="number">-1</span>]&gt;=c[i<span class="number">-1</span>][j])</span><br><span class="line">				&#123;</span><br><span class="line">					c[i][j]=c[i][j<span class="number">-1</span>];</span><br><span class="line">					b[i][j]=<span class="number">2</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					c[i][j]=c[i<span class="number">-1</span>][j];</span><br><span class="line">					b[i][j]=<span class="number">3</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">0</span>||j==<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">if</span>(b[i][j]==<span class="number">1</span>) <span class="comment">//即两个元素相同是打印</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">Print</span>(i<span class="number">-1</span>,j<span class="number">-1</span>);</span><br><span class="line">		cout&lt;&lt;s1[i<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(b[i][j]==<span class="number">2</span>)</span><br><span class="line">		<span class="built_in">Print</span>(i,j<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">Print</span>(i<span class="number">-1</span>,j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入第一个序列:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;s1;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入第二个序列:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;s2;</span><br><span class="line">	len1=<span class="built_in">strlen</span>(s1);</span><br><span class="line">	len2=<span class="built_in">strlen</span>(s2);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=len1;i++)</span><br><span class="line">		c[i][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=len2;j++)</span><br><span class="line">		c[<span class="number">0</span>][j]=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">LCSL</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最长公共子序列的长度是:&quot;</span>&lt;&lt;c[len1][len2]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最长公共子序列是:&quot;</span>;</span><br><span class="line">	<span class="built_in">Print</span>(len1,len2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="编辑距离"><a href="#编辑距离" class="headerlink" title="编辑距离"></a>编辑距离</h2><p>编辑距离是指将一个字符串变换为另一个字符串所需要的最小编辑操作。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">char</span> str1[N],str2[N];</span><br><span class="line"><span class="keyword">int</span> d[N][N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a&lt;b?a:b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">editdistance</span><span class="params">(<span class="keyword">char</span> *str1,<span class="keyword">char</span> *str2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> len1=<span class="built_in">strlen</span>(str1);</span><br><span class="line">	<span class="keyword">int</span> len2=<span class="built_in">strlen</span>(str2);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=len1;i++)</span><br><span class="line">		d[i][<span class="number">0</span>]=i;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=len2;j++)</span><br><span class="line">		d[<span class="number">0</span>][j]=j;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len1;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=len2;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> diff;</span><br><span class="line">			<span class="keyword">if</span>(str1[i<span class="number">-1</span>]==str2[j<span class="number">-1</span>])</span><br><span class="line">				diff=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				diff=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">int</span> temp=<span class="built_in">min</span>(d[i<span class="number">-1</span>][j]+<span class="number">1</span>,d[i][j<span class="number">-1</span>]+<span class="number">1</span>);</span><br><span class="line">			d[i][j]=<span class="built_in">min</span>(temp,d[i<span class="number">-1</span>][j<span class="number">-1</span>]+diff);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> d[len1][len2];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入str1：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;str1;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入str2：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;str2;</span><br><span class="line">	cout&lt;&lt;str1&lt;&lt;<span class="string">&quot;和&quot;</span>&lt;&lt;str2&lt;&lt;<span class="string">&quot;的编辑距离是：&quot;</span>&lt;&lt;<span class="built_in">editdistance</span>(str1,str2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="游艇租赁"><a href="#游艇租赁" class="headerlink" title="游艇租赁"></a>游艇租赁</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ms=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> r[ms][ms],m[ms][ms],s[ms][ms];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,k,d;</span><br><span class="line">	<span class="keyword">for</span>(d=<span class="number">3</span>;d&lt;=n;d++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;j&lt;=n-d+<span class="number">1</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			j=i+d<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(k=i+<span class="number">1</span>;k&lt;j;k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">int</span> temp;</span><br><span class="line">				temp=m[i][k]+m[k][j];</span><br><span class="line">				<span class="keyword">if</span>(temp&lt;m[i][j])</span><br><span class="line">				&#123;</span><br><span class="line">					m[i][j]=temp;</span><br><span class="line">					s[i][j]=k;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(s[i][j]==<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;j;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">print</span>(i,s[i][j]);</span><br><span class="line">	<span class="built_in">print</span>(s[i][j],j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入站点个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入各站点间的租金：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;=n;++j)</span><br><span class="line">		&#123;</span><br><span class="line">			cin&gt;&gt;r[i][j];</span><br><span class="line">			m[i][j]=r[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="built_in">rent</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;花费的最少租金为：&quot;</span>&lt;&lt;m[<span class="number">1</span>][n]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最少租金经过的站点为：&quot;</span>&lt;&lt;<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">print</span>(<span class="number">1</span>,n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="矩阵连乘"><a href="#矩阵连乘" class="headerlink" title="矩阵连乘"></a>矩阵连乘</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> msize=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> p[msize];</span><br><span class="line"><span class="keyword">int</span> m[msize][msize],s[msize][msize];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">matrixchain</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,r,k;</span><br><span class="line">	<span class="built_in">memset</span>(m,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(m));</span><br><span class="line">	<span class="built_in">memset</span>(s,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(s));</span><br><span class="line">	<span class="keyword">for</span>(r=<span class="number">2</span>;r&lt;=n;r++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n-r+<span class="number">1</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			j=r+i<span class="number">-1</span>;</span><br><span class="line">			m[i][j]=m[i+<span class="number">1</span>][j]+p[i<span class="number">-1</span>]*p[i]*p[j];</span><br><span class="line">			s[i][j]=i;</span><br><span class="line">			<span class="keyword">for</span>(k=i+<span class="number">1</span>;k&lt;j;k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">int</span> t=m[i][k]+m[k+<span class="number">1</span>][j]+p[i<span class="number">-1</span>]*p[k]*p[j];</span><br><span class="line">				<span class="keyword">if</span>(t&lt;m[i][j])</span><br><span class="line">				&#123;</span><br><span class="line">					m[i][j]=t;</span><br><span class="line">					s[i][j]=k;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i==j)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;A[&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;]&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;(&quot;</span>;</span><br><span class="line">	<span class="built_in">print</span>(i,s[i][j]);</span><br><span class="line">	<span class="built_in">print</span>(s[i][j]+<span class="number">1</span>,j);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入矩阵个数n:&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;逐个输入每个矩阵的行数和最后一个矩阵的列数：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;p[i];</span><br><span class="line">	<span class="built_in">matrixchain</span>();</span><br><span class="line">	<span class="built_in">print</span>(<span class="number">1</span>,n);</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最小计算量的值为：&quot;</span>&lt;&lt;m[<span class="number">1</span>][n]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最优三角剖分"><a href="#最优三角剖分" class="headerlink" title="最优三角剖分"></a>最优三角剖分</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> s[M][M];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">double</span> m[M][M],g[M][M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Convexpolygontriangulation</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		m[i][i]=<span class="number">0</span>;</span><br><span class="line">		s[i][i]=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> d=<span class="number">2</span>;d&lt;=n;d++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n-d+<span class="number">1</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> j=i+d<span class="number">-1</span>;</span><br><span class="line">			m[i][j]=m[i+<span class="number">1</span>][j]+g[i<span class="number">-1</span>][i]+g[i][j]+g[i<span class="number">-1</span>][j];</span><br><span class="line">			s[i][j]=i;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=i+<span class="number">1</span>;k&lt;j;k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">double</span> temp=m[i][k]+m[k+<span class="number">1</span>][j]+g[i<span class="number">-1</span>][k]+g[k][j]+g[i<span class="number">-1</span>][j];</span><br><span class="line">				<span class="keyword">if</span>(m[i][j]&gt;temp)</span><br><span class="line">				&#123;</span><br><span class="line">					m[i][j]=temp;</span><br><span class="line">					s[i][j]=k;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i==j)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">if</span>(s[i][j]&gt;i)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;&#123;v&quot;</span>&lt;&lt;i<span class="number">-1</span>&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;s[i][j]&lt;&lt;<span class="string">&quot;&#125;&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">if</span>(j&gt;s[i][j]+<span class="number">1</span>)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;&#123;v&quot;</span>&lt;&lt;s[i][j]&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;j&lt;&lt;<span class="string">&quot;&#125;&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">print</span>(i,s[i][j]);</span><br><span class="line">	<span class="built_in">print</span>(s[i][j]+<span class="number">1</span>,j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入顶点个数n：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	n--;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入各顶点的连接权值：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;++i)</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=n;++j)</span><br><span class="line">			cin&gt;&gt;g[i][j];</span><br><span class="line">	<span class="built_in">Convexpolygontriangulation</span>();</span><br><span class="line">	cout&lt;&lt;m[<span class="number">1</span>][n]&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">print</span>(<span class="number">1</span>,n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="石子合并"><a href="#石子合并" class="headerlink" title="石子合并"></a>石子合并</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">const int INF=1&lt;&lt;10;</span><br><span class="line">const int N=200;</span><br><span class="line">int Min[N][N],Max[N][N];</span><br><span class="line">int sum[N];//前n堆石子的数量</span><br><span class="line">int a[N];//每堆石子的数量</span><br><span class="line">int min_Circular,max_Circular;</span><br><span class="line"></span><br><span class="line">void straight(int a[],int n)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i=1;i&lt;=n;i++)  /初始化</span><br><span class="line">		Min[i][i]=0,Max[N][N]=0;</span><br><span class="line">	sum[0]=0;</span><br><span class="line">	for(int i=1;i&lt;=n;i++)</span><br><span class="line">		sum[i]=sum[i-1]+a[i];</span><br><span class="line">	for(int v=2;v&lt;=n;v++)  //枚举合并的堆数规模</span><br><span class="line">	&#123;</span><br><span class="line">		for(int i=1;i&lt;=n-v+1;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			int j=i+v-1;  //枚举终点j</span><br><span class="line">			Min[i][j]=INF; //初始化为最大值</span><br><span class="line">			Max[i][j]=-1; //初始化为-1</span><br><span class="line">			int tmp=sum[j]-sum[i-1];//记录i到j之间的石子数之和</span><br><span class="line">			for(int k=i;k&lt;j;k++) //枚举中间分隔点</span><br><span class="line">			&#123;</span><br><span class="line">				Min[i][j]=min(Min[i][j],Min[i][k]+Min[k+1][j]+tmp);</span><br><span class="line">				Max[i][j]=max(Max[i][j],Max[i][k]+Max[k+1][j]+tmp);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">void Circular(int a[],int n)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i=1;i&lt;=n-1;i++)</span><br><span class="line">		a[n+i]=a[i];</span><br><span class="line">	n=2*n-1;</span><br><span class="line">	straight(a,n);</span><br><span class="line">	n=(n+1)/2;</span><br><span class="line">	min_Circular=Min[1][n];</span><br><span class="line">	max_Circular=Max[1][n];</span><br><span class="line">	for(int i=2;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if(Min[i][n+i-1]&lt;min_Circular)</span><br><span class="line">			min_Circular=Min[i][n+i-1];</span><br><span class="line">		if(Max[i][n+i-1]&gt;max_Circular)</span><br><span class="line">			max_Circular=Max[i][n+i-1];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int n;</span><br><span class="line">	cout&lt;&lt;&quot;输入石子堆数：&quot;;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;&quot;依次输入各堆石子数：&quot;;</span><br><span class="line">	for(int i=1;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;a[i];</span><br><span class="line">	straight(a,n);</span><br><span class="line">	cout&lt;&lt;&quot;直线型最小花费为：&quot;&lt;&lt;Min[1][n]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;&quot;直线型最大花费为：&quot;&lt;&lt;Max[1][n]&lt;&lt;endl;</span><br><span class="line">	Circular(a,n);</span><br><span class="line">	cout&lt;&lt;&quot;圆形最小花费为：&quot;&lt;&lt;min_Circular&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;&quot;圆形最大花费为：&quot;&lt;&lt;max_Circular&lt;&lt;endl;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化算法"><a href="#优化算法" class="headerlink" title="优化算法"></a>优化算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1</span>&lt;&lt;<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">200</span>;</span><br><span class="line"><span class="keyword">int</span> Min[N][N],Max[N][N],s[N][N];</span><br><span class="line"><span class="keyword">int</span> sum[N];</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> min_Circular,max_Circular;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_Min</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> v=<span class="number">2</span>;v&lt;=n;v++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n-v+<span class="number">1</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> j=i+v<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">int</span> tmp=sum[j]-sum[i<span class="number">-1</span>];</span><br><span class="line">			<span class="keyword">int</span> il=s[i][j<span class="number">-1</span>]&gt;i?s[i][j<span class="number">-1</span>]:i;</span><br><span class="line">			<span class="keyword">int</span> jl=s[i+<span class="number">1</span>][j]&lt;j?s[i+<span class="number">1</span>][j]:j;</span><br><span class="line">			Min[i][j]=Min[i][il]+Min[il+<span class="number">1</span>][j];</span><br><span class="line">			s[i][j]=il;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=il+<span class="number">1</span>;k&lt;=jl;k++)</span><br><span class="line">				<span class="keyword">if</span>(Min[i][k]+Min[k+<span class="number">1</span>][j]&lt;Min[i][j])</span><br><span class="line">				&#123;</span><br><span class="line">					Min[i][j]=Min[i][k]+Min[k+<span class="number">1</span>][j];</span><br><span class="line">					s[i][j]=k;</span><br><span class="line">				&#125;</span><br><span class="line">			Min[i][j]+=tmp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_Max</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> v=<span class="number">2</span>;v&lt;=n;v++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n-v+<span class="number">1</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> j=i+v<span class="number">-1</span>;</span><br><span class="line">			Max[i][j]=<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">int</span> tmp=sum[j]-sum[i<span class="number">-1</span>];</span><br><span class="line">			<span class="keyword">if</span>(Max[i+<span class="number">1</span>][j]&gt;Max[i][j<span class="number">-1</span>])</span><br><span class="line">				Max[i][j]=Max[i+<span class="number">1</span>][j]+tmp;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				Max[i][j]=Max[i][j<span class="number">-1</span>]+tmp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">straight</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		Min[i][i]=<span class="number">0</span>,Max[i][i]=<span class="number">0</span>,s[i][i]=<span class="number">0</span>;</span><br><span class="line">	sum[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		sum[i]=sum[i<span class="number">-1</span>]+a[i];</span><br><span class="line">	<span class="built_in">get_Min</span>(n);</span><br><span class="line">	<span class="built_in">get_Max</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Circular</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">		a[n+i]=a[i];</span><br><span class="line">	n=<span class="number">2</span>*n<span class="number">-1</span>;</span><br><span class="line">	<span class="built_in">straight</span>(a,n);</span><br><span class="line">	n=(n+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">	min_Circular=Min[<span class="number">1</span>][n];</span><br><span class="line">	max_Circular=Max[<span class="number">1</span>][n];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(Min[i][n+i<span class="number">-1</span>]&lt;min_Circular)</span><br><span class="line">			min_Circular=Min[i][n+i<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">if</span>(Max[i][n+i<span class="number">-1</span>]&gt;max_Circular)</span><br><span class="line">			max_Circular=Max[i][n+i<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入石子堆数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入各堆石子数：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;a[i];</span><br><span class="line">	<span class="built_in">straight</span>(a,n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;直线型最小花费为：&quot;</span>&lt;&lt;Min[<span class="number">1</span>][n]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;直线型最大花费为：&quot;</span>&lt;&lt;Max[<span class="number">1</span>][n]&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">Circular</span>(a,n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;圆形最小花费为：&quot;</span>&lt;&lt;min_Circular&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;圆形最大花费为：&quot;</span>&lt;&lt;max_Circular&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="0-1背包问题"><a href="#0-1背包问题" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define maxn 1000</span><br><span class="line">#define M 100</span><br><span class="line">int c[M][maxn]; //c[i][j]表示前i个物品放入容量为j的购物车获得的最大价值</span><br><span class="line">int w[M],v[M];</span><br><span class="line">int x[M]; //x[i]表示第i个物品是否放入购物车</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int i,j,n,W;</span><br><span class="line">	cout&lt;&lt;&quot;输入物品个数n：&quot;;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;&quot;输入购物车容量w：&quot;;</span><br><span class="line">	cin&gt;&gt;W;</span><br><span class="line">	cout&lt;&lt;&quot;依次输入物品的重量和价值：&quot;;</span><br><span class="line">	for(i=1;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;w[i]&gt;&gt;v[i];</span><br><span class="line">	for(i=0;i&lt;=n;i++)</span><br><span class="line">		c[i][0]=0;</span><br><span class="line">	for(j=0;j&lt;=W;j++)</span><br><span class="line">		c[0][j]=0;</span><br><span class="line">	for(i=1;i&lt;=n;i++)</span><br><span class="line">		for(j=1;j&lt;=W;j++)</span><br><span class="line">			if(j&lt;w[i]) //物品重量大于购物车容量之后不再放入</span><br><span class="line">				c[i][j]=c[i-1][j];</span><br><span class="line">			else</span><br><span class="line">				c[i][j]=max(c[i-1][j],c[i-1][j-w[i]]+v[i]);</span><br><span class="line">	cout&lt;&lt;&quot;可装最大价值为：&quot;&lt;&lt;c[n][W]&lt;&lt;endl;</span><br><span class="line">	j=W;</span><br><span class="line">	for(i=n;i&gt;0;i--)</span><br><span class="line">		if(c[i][j]&gt;c[i-1][j])</span><br><span class="line">		&#123;</span><br><span class="line">			x[i]=1;</span><br><span class="line">			j-=w[i];</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">			x[i]=0;</span><br><span class="line">		cout&lt;&lt;&quot;装入购物车的物品为：&quot;;</span><br><span class="line">		for(i=1;i&lt;=n;i++)</span><br><span class="line">			if(x[i]==1)</span><br><span class="line">				cout&lt;&lt;i&lt;&lt;&quot; &quot;;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="快速定位-最优二叉搜索树"><a href="#快速定位-最优二叉搜索树" class="headerlink" title="快速定位-最优二叉搜索树"></a>快速定位-最优二叉搜索树</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">const int M=100;</span><br><span class="line">double c[M][M],w[M][M],p[M],q[M];</span><br><span class="line">int s[M][M];</span><br><span class="line">int i,n,j,k;</span><br><span class="line">void Opeimal_BST()</span><br><span class="line">&#123;</span><br><span class="line">	for(i=1;i&lt;=n+1;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		c[i][i-1]=0.0;</span><br><span class="line">		w[i][i-1]=q[i-1];</span><br><span class="line">	&#125;</span><br><span class="line">	for(int t=1;t&lt;=n;t++) //从下标为i开始的关键字到下标为j的关键字</span><br><span class="line">		for(i=1;i&lt;=n-t+1;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			j=i+t-1;</span><br><span class="line">			w[i][j]=w[i][j-1]+p[j]+q[j];</span><br><span class="line">			c[i][j]=c[i][i-1]+c[i+1][j];</span><br><span class="line">			s[i][j]=i;     //初始化</span><br><span class="line">			//选择i+1到j之间的某个下标的关键字作为从i到j的根，如果组成的树的期望值当前最小，则k为从i到j的根节点</span><br><span class="line">			for(k=i+1;k&lt;=j;k++)</span><br><span class="line">			&#123;</span><br><span class="line">				double temp=c[i][k-1]+c[k+1][j];</span><br><span class="line">				if(temp&lt;c[i][j]&amp;&amp;fabs(temp-c[i][j])&gt;1E-6) //c++中浮点数不能直接比较</span><br><span class="line">				&#123;</span><br><span class="line">					c[i][j]=temp;</span><br><span class="line">					s[i][j]=k; //k即为从下标i到j的根节点</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			c[i][j]+=w[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line">void Construct_Optimal_BST(int i,int j,bool flag)</span><br><span class="line">&#123;</span><br><span class="line">	if(flag==0)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;S&quot;&lt;&lt;s[i][j]&lt;&lt;&quot; 是根&quot;&lt;&lt;endl;</span><br><span class="line">		flag=1;</span><br><span class="line">	&#125;</span><br><span class="line">	int k=s[i][j];</span><br><span class="line">	if(k-1&lt;i) //如果左子树是叶子</span><br><span class="line">		cout&lt;&lt;&quot;e&quot;&lt;&lt;k-1&lt;&lt;&quot; is the left child of &quot;&lt;&lt;&quot;S&quot;&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">	else  //如果左子树不是叶子</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;S&quot;&lt;&lt;s[i][k-1]&lt;&lt;&quot; is the left child of &quot;&lt;&lt;&quot;S&quot;&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">		Construct_Optimal_BST(i,k-1,1);</span><br><span class="line">	&#125;</span><br><span class="line">	if(k&gt;=j)  //如果右子树是叶子</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;e&quot;&lt;&lt;j&lt;&lt;&quot; is the right child of &quot;&lt;&lt;&quot;S&quot;&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	else  //如果右子树不是叶子</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;S&quot;&lt;&lt;s[k+1][j]&lt;&lt;&quot;is the right child of &quot;&lt;&lt;&quot;S&quot;&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">		Construct_Optimal_BST(k+1,j,1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	cout&lt;&lt;&quot;输入关键字个数n:&quot;;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;&quot;依次输入每个关键字的搜索概率：&quot;;</span><br><span class="line">	for(i=1;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;p[i];</span><br><span class="line">	cout&lt;&lt;&quot;依次输入每个虚节点的搜索概率：&quot;;</span><br><span class="line">	for(i=0;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;q[i];</span><br><span class="line">	Opeimal_BST();</span><br><span class="line">	cout&lt;&lt;&quot;最小搜索成本为：&quot;&lt;&lt;c[1][n]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;&quot;最优二叉搜索树为：&quot;;</span><br><span class="line">	Construct_Optimal_BST(1,n,0);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化算法-1"><a href="#优化算法-1" class="headerlink" title="优化算法"></a>优化算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">double</span> c[M][M],w[M][M],p[M],q[M];</span><br><span class="line"><span class="keyword">int</span> s[M][M];</span><br><span class="line"><span class="keyword">int</span> i,n,j,k;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Opeimal_BST</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		c[i][i<span class="number">-1</span>]=<span class="number">0.0</span>;</span><br><span class="line">		w[i][i<span class="number">-1</span>]=q[i<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=n;t++)</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n-t+<span class="number">1</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			j=i+t<span class="number">-1</span>;</span><br><span class="line">			w[i][j]=w[i][j<span class="number">-1</span>]+p[j]+q[j];</span><br><span class="line">			<span class="keyword">int</span> il=s[i][j<span class="number">-1</span>]&gt;i?s[i][j<span class="number">-1</span>]:i;</span><br><span class="line">			<span class="keyword">int</span> jl=s[i+<span class="number">1</span>][j]&lt;j?s[i+<span class="number">1</span>][j]:j;</span><br><span class="line">			c[i][j]=c[i][il<span class="number">-1</span>]+c[il+<span class="number">1</span>][j];</span><br><span class="line">			s[i][j]=il;</span><br><span class="line">			<span class="keyword">for</span>(k=il+<span class="number">1</span>;k&lt;=jl;k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">double</span> temp=c[i][k<span class="number">-1</span>]+c[k+<span class="number">1</span>][j];</span><br><span class="line">				<span class="keyword">if</span>(temp&lt;c[i][j]&amp;&amp;<span class="built_in">fabs</span>(temp-c[i][j])&gt;<span class="number">1E-6</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					c[i][j]=temp;</span><br><span class="line">					s[i][j]=k;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			c[i][j]+=w[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Construct_Optimal_BST</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">bool</span> flag)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(flag==<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;s[i][j]&lt;&lt;<span class="string">&quot; 是根&quot;</span>&lt;&lt;endl;</span><br><span class="line">		flag=<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> k=s[i][j];</span><br><span class="line">	<span class="keyword">if</span>(k<span class="number">-1</span>&lt;i)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;e&quot;</span>&lt;&lt;k<span class="number">-1</span>&lt;&lt;<span class="string">&quot; is the left child of &quot;</span>&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;s[i][k<span class="number">-1</span>]&lt;&lt;<span class="string">&quot; is the left child of &quot;</span>&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">Construct_Optimal_BST</span>(i,k<span class="number">-1</span>,<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(k&gt;=j)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;e&quot;</span>&lt;&lt;j&lt;&lt;<span class="string">&quot; is the right child of &quot;</span>&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;s[k+<span class="number">1</span>][j]&lt;&lt;<span class="string">&quot;is the right child of &quot;</span>&lt;&lt;<span class="string">&quot;S&quot;</span>&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">Construct_Optimal_BST</span>(k+<span class="number">1</span>,j,<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入关键字个数n:&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个关键字的搜索概率：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;p[i];</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个虚节点的搜索概率：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;q[i];</span><br><span class="line">	<span class="built_in">Opeimal_BST</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最小搜索成本为：&quot;</span>&lt;&lt;c[<span class="number">1</span>][n]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最优二叉搜索树为：&quot;</span>;</span><br><span class="line">	<span class="built_in">Construct_Optimal_BST</span>(<span class="number">1</span>,n,<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="算法技巧"><a href="#算法技巧" class="headerlink" title="算法技巧"></a>算法技巧</h2><ul>
<li>最优子结构判定<ul>
<li>作出一个选择</li>
<li>假定已经知道了那种选择是最优的</li>
<li>最优选择会产生哪些子问题</li>
<li>证明原问题的最优解包含子问题的最优解（通常使用反证法）</li>
</ul>
</li>
<li>得到最优解递归式<ul>
<li>分析原问题最优解和子问题最优解的关系</li>
<li>考查有多少种选择</li>
<li>得到最优解递归式</li>
</ul>
</li>
</ul>
<h1 id="回溯法"><a href="#回溯法" class="headerlink" title="回溯法"></a>回溯法</h1><p>回溯法是从初始状态出发，按照深度优先搜索的方式，根据产生子节点的条件约束，搜索问题的解。</p>
<ul>
<li>隐约束（剪枝函数）<ul>
<li>约束函数：能否得到问题的可行解的约束。</li>
<li>限界函数：能否代词最优解的约束。</li>
</ul>
</li>
</ul>
<h2 id="0-1背包问题-1"><a href="#0-1背包问题-1" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">int</span> i,j,n,W;</span><br><span class="line"><span class="keyword">double</span> w[M],v[M]; <span class="comment">//每个物品的重量和价值</span></span><br><span class="line"><span class="keyword">bool</span> x[M]; <span class="comment">//物品是否放入购物车的解</span></span><br><span class="line"><span class="keyword">double</span> cw,cp,bestp; <span class="comment">//当前价值，当前重量和当前最优价值</span></span><br><span class="line"><span class="keyword">bool</span> bestx[M]; <span class="comment">//当前最优解</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Bound</span><span class="params">(<span class="keyword">int</span> i)</span> <span class="comment">//计算上界，即剩余物品的总价值</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> rp=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=n)</span><br><span class="line">	&#123;</span><br><span class="line">		rp+=v[i];</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> cp+rp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span> <span class="comment">//用于搜索空间数，t表示当前扩展节点在第t层</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n) <span class="comment">//若已达到叶子节点</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			bestx[j]=x[j];</span><br><span class="line">		bestp=cp;</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(cw+w[t]&lt;=W) <span class="comment">//满足限制条件搜索左子树</span></span><br><span class="line">	&#123;</span><br><span class="line">		x[t]=<span class="number">1</span>;</span><br><span class="line">		cw+=w[t];</span><br><span class="line">		cp+=v[t];</span><br><span class="line">		<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">		cw-=w[t];</span><br><span class="line">		cp-=v[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">Bound</span>(t+<span class="number">1</span>)&gt;bestp) <span class="comment">//满足限制条件搜索左子树</span></span><br><span class="line">	&#123;</span><br><span class="line">		x[t]=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Knapsack</span><span class="params">(<span class="keyword">double</span> W,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cw=<span class="number">0</span>;</span><br><span class="line">	cp=<span class="number">0</span>;</span><br><span class="line">	bestp=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">double</span> sumw=<span class="number">0.0</span>;</span><br><span class="line">	<span class="keyword">double</span> sumv=<span class="number">0.0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		sumv+=v[i];</span><br><span class="line">		sumw+=w[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sumw&lt;=W)</span><br><span class="line">	&#123;</span><br><span class="line">		bestp=sumv;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;放入购物车的商品的最大价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;将所有物品放入购物车。&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的商品的最大价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的商品的标号为：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(bestx[i]==<span class="number">1</span>)</span><br><span class="line">			cout&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入物品的个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入购物车的容量：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;W;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个物品的重量和价值：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;w[i]&gt;&gt;v[i];</span><br><span class="line">	<span class="built_in">Knapsack</span>(W,n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化算法-2"><a href="#优化算法-2" class="headerlink" title="优化算法"></a>优化算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">int</span> i,j,n,W;</span><br><span class="line"><span class="keyword">double</span> w[M],v[M];</span><br><span class="line"><span class="keyword">bool</span> x[M];</span><br><span class="line"><span class="keyword">double</span> cw,cp,bestp;</span><br><span class="line"><span class="keyword">bool</span> bestx[M];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Bound</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> cleft=W-cw;</span><br><span class="line">	<span class="keyword">double</span> brp=<span class="number">0.0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=n&amp;&amp;w[i]&lt;cleft)</span><br><span class="line">	&#123;</span><br><span class="line">		cleft-=w[i];</span><br><span class="line">		brp+=v[i];</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;=n)</span><br><span class="line">	&#123;</span><br><span class="line">		brp+=v[i]/w[i]*cleft;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> cp+brp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			bestx[j]=x[j];</span><br><span class="line">		bestp=cp;</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(cw+w[t]&lt;=W)</span><br><span class="line">	&#123;</span><br><span class="line">		x[t]=<span class="number">1</span>;</span><br><span class="line">		cw+=w[t];</span><br><span class="line">		cp+=v[t];</span><br><span class="line">		<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">		cw-=w[t];</span><br><span class="line">		cp-=v[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">Bound</span>(t+<span class="number">1</span>)&gt;bestp)</span><br><span class="line">	&#123;</span><br><span class="line">		x[t]=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">double</span> d;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Object a1,Object a2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a1.d&gt;a2.d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Knapsack</span><span class="params">(<span class="keyword">double</span> W,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cw=<span class="number">0</span>;</span><br><span class="line">	cp=<span class="number">0</span>;</span><br><span class="line">	bestp=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">double</span> sumw=<span class="number">0.0</span>;</span><br><span class="line">	<span class="keyword">double</span> sumv=<span class="number">0.0</span>;</span><br><span class="line">	Object Q[n];</span><br><span class="line">	<span class="keyword">double</span> a[n+<span class="number">1</span>],b[n+<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		Q[i<span class="number">-1</span>].id=i;</span><br><span class="line">		Q[i<span class="number">-1</span>].d=<span class="number">1.0</span>*v[i]/w[i];</span><br><span class="line">		sumv+=v[i];</span><br><span class="line">		sumw+=w[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sumw&lt;=W)</span><br><span class="line">	&#123;</span><br><span class="line">		bestp=sumv;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;放入购物车的商品的最大价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;将所有物品放入购物车。&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(Q,Q+n,cmp);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		a[i]=w[Q[i<span class="number">-1</span>].id];</span><br><span class="line">		b[i]=v[Q[i<span class="number">-1</span>].id];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		w[i]=a[i];</span><br><span class="line">		v[i]=b[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的商品的最大价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的商品的标号为：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(bestx[i]==<span class="number">1</span>)</span><br><span class="line">			cout&lt;&lt;Q[i<span class="number">-1</span>].id&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入物品的个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入购物车的容量：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;W;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个物品的重量和价值：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;w[i]&gt;&gt;v[i];</span><br><span class="line">	<span class="built_in">Knapsack</span>(W,n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最大团"><a href="#最大团" class="headerlink" title="最大团"></a>最大团</h2><p>团：当且仅当G‘不包含在G的更大的完全子图中，也就是说G’是G的极大完全子图时，G‘是G的团。</p>
<p>最大团：G的所有团中，含节点数最多的团。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;algorithm&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">int</span> n,m,cn,bestn;</span><br><span class="line"><span class="keyword">double</span> a[M][M];</span><br><span class="line"><span class="keyword">bool</span> x[M];</span><br><span class="line"><span class="keyword">bool</span> bestx[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Place</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">bool</span> ok=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;t;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(x[j]&amp;&amp;a[t][j]==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			ok=<span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n) <span class="comment">//到达叶节点</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			bestx[i]=x[i];</span><br><span class="line">		bestn=cn;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">Place</span>(t))<span class="comment">//满足约束条件，进入左子树</span></span><br><span class="line">	&#123;</span><br><span class="line">		x[t]=<span class="number">1</span>;</span><br><span class="line">		cn++;</span><br><span class="line">		<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">		cn--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(cn+n-t&gt;bestn)<span class="comment">//满足限界条件，进入右子树</span></span><br><span class="line">	&#123;</span><br><span class="line">		x[t]=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入部落的人数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入人与人的友好关系数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	<span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(a));<span class="comment">//memset需要string.h头文件</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入有友好关系的两个人：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v;</span><br><span class="line">		a[u][v]=a[v][u]=<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	bestn=<span class="number">0</span>;</span><br><span class="line">	cn=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最大人数为：&quot;</span>&lt;&lt;bestn&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;国王护卫队成员为：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">if</span>(bestx[i])</span><br><span class="line">			cout&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="地图着色"><a href="#地图着色" class="headerlink" title="地图着色"></a>地图着色</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;algorithm&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">int</span> n,m,edge,sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> a[M][M];</span><br><span class="line"><span class="keyword">int</span> x[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Createa</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入边数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;edge;</span><br><span class="line">	<span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(a));</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入有边连接的两个点：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=edge;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v;</span><br><span class="line">		a[u][v]=a[v][u]=<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Ok</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;t;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(a[t][j])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(x[j]==x[t])</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		sum++;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;sum&lt;&lt;<span class="string">&quot;种方案:&quot;</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			cout&lt;&lt;x[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			x[t]=i;</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">Ok</span>(t))</span><br><span class="line">				<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入颜色数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入无向图的邻接矩阵：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">Createa</span>();</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="n皇后问题"><a href="#n皇后问题" class="headerlink" title="n皇后问题"></a>n皇后问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;algorithm&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">int</span> n,countn;</span><br><span class="line"><span class="keyword">int</span> x[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Place</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">bool</span> ok=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;t;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(x[t]==x[j]||t-j==<span class="built_in">fabs</span>(x[t]-x[j]))</span><br><span class="line">		&#123;</span><br><span class="line">			ok=<span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		countn++;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			cout&lt;&lt;x[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;-----------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			x[t]=i;</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">Place</span>(t))</span><br><span class="line">				<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入皇后个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	countn=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;答案的个数是：&quot;</span>&lt;&lt;countn&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最优加工顺序"><a href="#最优加工顺序" class="headerlink" title="最优加工顺序"></a>最优加工顺序</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;cmath&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> n,bestf,f1,f2;</span><br><span class="line"><span class="keyword">int</span> x[M],bestx[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> x,y;</span><br><span class="line">&#125;T[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="comment">//记录最优排列</span></span><br><span class="line">			bestx[i]=x[i];</span><br><span class="line">		bestf=f2;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=t;i&lt;=n;i++) <span class="comment">//枚举</span></span><br><span class="line">	&#123;</span><br><span class="line">		f1+=T[x[i]].x;</span><br><span class="line">		<span class="keyword">int</span> temp=f2;</span><br><span class="line">		f2=<span class="built_in">max</span>(f1,f2)+T[x[i]].y;</span><br><span class="line">		<span class="keyword">if</span>(f2&lt;bestf) <span class="comment">//限界条件</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">swap</span>(x[t],x[i]); <span class="comment">//交换</span></span><br><span class="line">			<span class="built_in">Backtrack</span>(t+<span class="number">1</span>); <span class="comment">//继续深搜</span></span><br><span class="line">			<span class="built_in">swap</span>(x[t],x[i]); <span class="comment">//复位，反交换</span></span><br><span class="line">		&#125;</span><br><span class="line">		f1-=T[x[i]].x;</span><br><span class="line">		f2=temp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入机器零件个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入零件在两个机器上所需要的时间：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;T[i].x&gt;&gt;T[i].y;</span><br><span class="line">		x[i]=i;</span><br><span class="line">	&#125;</span><br><span class="line">	bestf=INF;</span><br><span class="line">	f1=f2=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">memset</span>(bestx,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(bestx));</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最优加工顺序是：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;bestx[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最优加工时间为：&quot;</span>;</span><br><span class="line">	cout&lt;&lt;bestf&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化算法-3"><a href="#优化算法-3" class="headerlink" title="优化算法"></a>优化算法</h3><p>使用贝尔曼规则优化,复杂度可降至<br>$$<br>O(nlogn)<br>$$</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;cmath&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">int</span> x,y;</span><br><span class="line">&#125;T[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">min</span>(b.x,a.y)&gt;=<span class="built_in">min</span>(b.y,a.x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入机器零件个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入零件在两个机器上所需要的时间：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;T[i].x&gt;&gt;T[i].y;</span><br><span class="line">		T[i].id=i+<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(T,T+n,cmp);</span><br><span class="line">	<span class="keyword">int</span> f1=<span class="number">0</span>,f2=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		f1+=T[i].x;	</span><br><span class="line">		f2=<span class="built_in">max</span>(f1,f2)+T[i].y;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最优加工顺序是：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">		cout&lt;&lt;T[i].id&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最优加工时间为：&quot;</span>;</span><br><span class="line">	cout&lt;&lt;f2&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最短旅行距离"><a href="#最短旅行距离" class="headerlink" title="最短旅行距离"></a>最短旅行距离</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;string.h&gt;</span></span><br><span class="line"><span class="comment">//#include&lt;cmath&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> n,cl,bestl,x[M],g[M][M],bestx[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Backtrack</span><span class="params">(<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(t&gt;n)</span><br><span class="line">	&#123; <span class="comment">//最后一个城市与出发城市有边相连并且路径长度比当前最优值小，说明找到了一条更好的路径，记录相关信息</span></span><br><span class="line">		<span class="keyword">if</span>(g[x[n]][<span class="number">1</span>]!=INF&amp;&amp;(cl+g[x[n]][<span class="number">1</span>]&lt;bestl))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">				bestx[j]=x[j];</span><br><span class="line">			bestl=cl+g[x[n]][<span class="number">1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=t;j&lt;=n;j++)</span><br><span class="line">		&#123; <span class="comment">//探索扩展节点的所有分支</span></span><br><span class="line">            <span class="comment">//如果第t-1个城市与第t个城市有边相连并且有可能得到更短的路线</span></span><br><span class="line">			<span class="keyword">if</span>(g[x[t<span class="number">-1</span>]][x[j]]!=INF&amp;&amp;(cl+g[x[t<span class="number">-1</span>]][x[j]]&lt;bestl))</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">//保存第t个要去的城市编号到x[t]比赛，进入t+1层</span></span><br><span class="line">				<span class="built_in">swap</span>(x[t],x[j]);</span><br><span class="line">				cl=cl+g[x[t<span class="number">-1</span>]][x[t]];</span><br><span class="line">				<span class="built_in">Backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">				cl-=g[x[t<span class="number">-1</span>]][x[t]];</span><br><span class="line">				<span class="built_in">swap</span>(x[t],x[j]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	bestl=INF;</span><br><span class="line">	cl=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j++)</span><br><span class="line">			g[i][j]=g[j][i]=INF;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		x[i]=i;</span><br><span class="line">		bestx[i]=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入地点个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	<span class="keyword">int</span> m,u,v,dis;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入路线条数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入每两个地点的距离：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;dis;</span><br><span class="line">		g[u][v]=g[v][u]=dis;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Backtrack</span>(<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最优旅行路线是：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;bestx[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短旅行距离为：&quot;</span>;</span><br><span class="line">	cout&lt;&lt;bestl&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="算法技巧-1"><a href="#算法技巧-1" class="headerlink" title="算法技巧"></a>算法技巧</h2><ul>
<li>定义合适的解空间<ul>
<li>解的组织形式</li>
<li>显约束：对解分量的取值范围的限定</li>
</ul>
</li>
<li>确定解空间的组织结构</li>
<li>搜索解空间<ul>
<li>只求可行解，只需要约束函数</li>
<li>求最优解，需要约束函数和限界函数</li>
</ul>
</li>
</ul>
<h1 id="分支限界法"><a href="#分支限界法" class="headerlink" title="分支限界法"></a>分支限界法</h1><h2 id="0-1背包问题-2"><a href="#0-1背包问题-2" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">bool</span> bestx[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> //定义节点</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> cp,rp; <span class="comment">//背包中的物品总价值和剩余物品总价值</span></span><br><span class="line">	<span class="keyword">int</span> rw; <span class="comment">//背包剩余容量</span></span><br><span class="line">	<span class="keyword">int</span> id; <span class="comment">//物品编号</span></span><br><span class="line">	<span class="keyword">bool</span> x[N];<span class="comment">//解向量</span></span><br><span class="line">	<span class="built_in">Node</span>()&#123;<span class="built_in">memset</span>(x,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(x));&#125;<span class="comment">//初始化</span></span><br><span class="line">	<span class="built_in">Node</span>(<span class="keyword">int</span> _cp,<span class="keyword">int</span> _rp,<span class="keyword">int</span> _rw,<span class="keyword">int</span> _id)</span><br><span class="line">	&#123;<span class="comment">//构造函数</span></span><br><span class="line">		cp=_cp;</span><br><span class="line">		rp=_rp;</span><br><span class="line">		rw=_rw;</span><br><span class="line">		id=_id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Goods</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">	<span class="keyword">int</span> weight;</span><br><span class="line">&#125;goods[N];</span><br><span class="line"><span class="keyword">int</span> bestp,W,n,sumw,sumv;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span><span class="comment">//子集树的搜索</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t,tcp,trp,trw;</span><br><span class="line">	queue&lt;Node&gt; q; <span class="comment">//创建普通队列</span></span><br><span class="line">	q.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">0</span>,sumv,W,<span class="number">1</span>));<span class="comment">//压入初始节点</span></span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		Node livenode,lchild,rchild;<span class="comment">//3个节点</span></span><br><span class="line">		livenode=q.<span class="built_in">front</span>();<span class="comment">//队头元素为扩展节点</span></span><br><span class="line">		q.<span class="built_in">pop</span>();<span class="comment">//队头出队</span></span><br><span class="line">		t=livenode.id;</span><br><span class="line">		<span class="keyword">if</span>(t&gt;n||livenode.rw==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(livenode.cp&gt;=bestp)</span><br><span class="line">			&#123;<span class="comment">//更新最优值和最优解</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">					bestx[i]=livenode.x[i];</span><br><span class="line">				bestp=livenode.cp;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">//判定当前节点是否满足限界条件，不满足则不扩展</span></span><br><span class="line">		<span class="keyword">if</span>(livenode.cp+livenode.rp&lt;bestp)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">        <span class="comment">//扩展左子树</span></span><br><span class="line">		tcp=livenode.cp;<span class="comment">//当前购物车中价值</span></span><br><span class="line">		trp=livenode.rp-goods[t].value;<span class="comment">//不管当前物品是否装入，剩余价值都会减少</span></span><br><span class="line">		trw=livenode.rw;<span class="comment">//购物车剩余容量</span></span><br><span class="line">		<span class="keyword">if</span>(trw&gt;=goods[t].weight)<span class="comment">//满足约束，放入购物车</span></span><br><span class="line">		&#123;</span><br><span class="line">			lchild.rw=trw-goods[t].weight;</span><br><span class="line">			lchild.cp=tcp+goods[t].value;</span><br><span class="line">			lchild=<span class="built_in">Node</span>(lchild.cp,trp,lchild.rw,t+<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;t;i++)</span><br><span class="line">				lchild.x[i]=livenode.x[i];</span><br><span class="line">			lchild.x[t]=<span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span>(lchild.cp&gt;bestp)</span><br><span class="line">				bestp=lchild.cp;</span><br><span class="line">			q.<span class="built_in">push</span>(lchild);<span class="comment">//左孩子入队</span></span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">//扩展右子树</span></span><br><span class="line">		<span class="keyword">if</span>(tcp+trp&gt;=bestp)</span><br><span class="line">		&#123;</span><br><span class="line">			rchild=<span class="built_in">Node</span>(tcp,trp,trw,t+<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;t;i++)</span><br><span class="line">				rchild.x[i]=livenode.x[i];</span><br><span class="line">			rchild.x[t]=<span class="literal">false</span>;</span><br><span class="line">			q.<span class="built_in">push</span>(rchild);<span class="comment">//右孩子入队</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> bestp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入物品个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入购物车容量：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;W;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入每个物品的重量和价值：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;goods[i].weight&gt;&gt;goods[i].value;</span><br><span class="line">		sumv+=goods[i].value;</span><br><span class="line">		sumw+=goods[i].weight;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sumw&lt;=W)</span><br><span class="line">	&#123;</span><br><span class="line">		bestp=sumw;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;放入购物车的最大物品价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;所有物品放入购物车。&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">bfs</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的最大物品价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的物品序号为：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">if</span>(bestx[i])</span><br><span class="line">			cout&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化-优先队列式分支限界法"><a href="#优化-优先队列式分支限界法" class="headerlink" title="优化-优先队列式分支限界法"></a>优化-优先队列式分支限界法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">bool</span> bestx[N];</span><br><span class="line"><span class="keyword">int</span> w[N],v[N];<span class="comment">//辅助数组，用于存储排序后的重量和价值</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> cp;</span><br><span class="line">	<span class="keyword">double</span> up;<span class="comment">//价值上界</span></span><br><span class="line">	<span class="keyword">int</span> rw;</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">bool</span> x[N];</span><br><span class="line">	<span class="built_in">Node</span>()&#123;<span class="built_in">memset</span>(x,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(x));&#125;</span><br><span class="line">	<span class="built_in">Node</span>(<span class="keyword">int</span> _cp,<span class="keyword">double</span> _up,<span class="keyword">int</span> _rw,<span class="keyword">int</span> _id)</span><br><span class="line">	&#123;</span><br><span class="line">		cp=_cp;</span><br><span class="line">		up=_up;</span><br><span class="line">		rw=_rw;</span><br><span class="line">		id=_id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Goods</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">	<span class="keyword">int</span> weight;</span><br><span class="line">&#125;goods[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class">&#123;</span> <span class="comment">//辅助物品结构体，包含物品序号和单位重量价值，用于按单位重量价值排序</span></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">double</span> d;<span class="comment">//单位重量价值</span></span><br><span class="line">&#125;S[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Object a,Object b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.d&gt;b.d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Node &amp;a,<span class="keyword">const</span> Node &amp;b)</span><br><span class="line">&#123;<span class="comment">//定义队列的优先级，以up为优先级</span></span><br><span class="line">	<span class="keyword">return</span> a.up&lt;b.up;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> bestp,W,n,sumw,sumv;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Bound</span><span class="params">(Node tnode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> maxvalue=tnode.cp;</span><br><span class="line">	<span class="keyword">int</span> t=tnode.id;</span><br><span class="line">	<span class="keyword">double</span> left=tnode.rw;</span><br><span class="line">	<span class="keyword">while</span>(t&lt;=n&amp;&amp;w[t]&lt;=left)</span><br><span class="line">	&#123;</span><br><span class="line">		maxvalue+=v[t];</span><br><span class="line">		left-=w[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(t&lt;=n)</span><br><span class="line">		maxvalue+=<span class="number">1.0</span>*v[t]/w[t]*left;</span><br><span class="line">	<span class="keyword">return</span> maxvalue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">proirbfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t,tcp,tup,trw;</span><br><span class="line">	priority_queue&lt;Node&gt; q;</span><br><span class="line">	q.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">0</span>,sumv,W,<span class="number">1</span>));</span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		Node livenode,lchild,rchild;</span><br><span class="line">		livenode=q.<span class="built_in">top</span>();</span><br><span class="line">		q.<span class="built_in">pop</span>();</span><br><span class="line">		t=livenode.id;</span><br><span class="line">		<span class="keyword">if</span>(t&gt;n||livenode.rw==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(livenode.cp&gt;=bestp)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">					bestx[i]=livenode.x[i];</span><br><span class="line">				bestp=livenode.cp;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(livenode.up&lt;bestp)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		tcp=livenode.cp;</span><br><span class="line">		trw=livenode.rw;</span><br><span class="line">		<span class="keyword">if</span>(trw&gt;=w[t])</span><br><span class="line">		&#123;</span><br><span class="line">			lchild.rw=trw-w[t];</span><br><span class="line">			lchild.cp=tcp+v[t];</span><br><span class="line">			lchild.id=t+<span class="number">1</span>;</span><br><span class="line">			tup=<span class="built_in">Bound</span>(lchild);</span><br><span class="line">			lchild=<span class="built_in">Node</span>(lchild.cp,tup,lchild.rw,t+<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;t;i++)</span><br><span class="line">				lchild.x[i]=livenode.x[i];</span><br><span class="line">			lchild.x[t]=<span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span>(lchild.cp&gt;bestp)</span><br><span class="line">				bestp=lchild.cp;</span><br><span class="line">			q.<span class="built_in">push</span>(lchild);</span><br><span class="line">		&#125;</span><br><span class="line">		rchild.rw=trw;</span><br><span class="line">		rchild.cp=tcp;</span><br><span class="line">		rchild.id=t+<span class="number">1</span>;</span><br><span class="line">		tup=<span class="built_in">Bound</span>(rchild);</span><br><span class="line">		<span class="keyword">if</span>(tup&gt;=bestp)</span><br><span class="line">		&#123;</span><br><span class="line">			rchild=<span class="built_in">Node</span>(tcp,tup,trw,t+<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;t;i++)</span><br><span class="line">				rchild.x[i]=livenode.x[i];</span><br><span class="line">			rchild.x[t]=<span class="literal">false</span>;</span><br><span class="line">			q.<span class="built_in">push</span>(rchild);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> bestp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	bestp=<span class="number">0</span>;</span><br><span class="line">	sumv=sumw=<span class="number">0</span>;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;请输入物品个数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入购物车容量：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;W;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入每个物品的重量和价值：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;goods[i].weight&gt;&gt;goods[i].value;</span><br><span class="line">		sumv+=goods[i].value;</span><br><span class="line">		sumw+=goods[i].weight;</span><br><span class="line">		S[i<span class="number">-1</span>].id=i;</span><br><span class="line">		S[i<span class="number">-1</span>].d=<span class="number">1.0</span>*goods[i].value/goods[i].weight;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sumw&lt;=W)</span><br><span class="line">	&#123;</span><br><span class="line">		bestp=sumv;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;放入购物车的最大物品价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;所有物品放入购物车。&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(S,S+n,cmp);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;排序后的物品价值和重量：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		w[i]=goods[S[i<span class="number">-1</span>].id].weight;<span class="comment">//把排序后的数据传递给辅助数组</span></span><br><span class="line">		v[i]=goods[S[i<span class="number">-1</span>].id].value;</span><br><span class="line">		cout&lt;&lt;w[i]&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;v[i]&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">proirbfs</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的最大物品价值为：&quot;</span>&lt;&lt;bestp&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;放入购物车的物品序号为：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">if</span>(bestx[i])</span><br><span class="line">			cout&lt;&lt;S[i<span class="number">-1</span>].id&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最短旅行路径"><a href="#最短旅行路径" class="headerlink" title="最短旅行路径"></a>最短旅行路径</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">double</span> g[N][N];</span><br><span class="line"><span class="keyword">int</span> bestx[N];</span><br><span class="line"><span class="keyword">double</span> bestl;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">double</span> cl;</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">int</span> x[N];</span><br><span class="line">	<span class="built_in">Node</span>()&#123;&#125;;</span><br><span class="line">	<span class="built_in">Node</span>(<span class="keyword">double</span> _cl,<span class="keyword">int</span> _id)</span><br><span class="line">	&#123;</span><br><span class="line">		cl=_cl;</span><br><span class="line">		id=_id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//定义队列的优先级，以cl为优先级，cl值越小，越优先</span></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Node &amp;a,<span class="keyword">const</span> Node &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> a.cl&gt;b.cl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Travelbfs</span><span class="params">()</span><span class="comment">//优先队列式分支限界法搜索</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t;</span><br><span class="line">	Node livenode,newnode;</span><br><span class="line">	priority_queue &lt;Node&gt; q;<span class="comment">//创建一个优先队列</span></span><br><span class="line">	newnode=<span class="built_in">Node</span>(<span class="number">0</span>,<span class="number">2</span>); <span class="comment">//创建根节点</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		newnode.x[i]=i;<span class="comment">//初始化根节点的解向量</span></span><br><span class="line">	q.<span class="built_in">push</span>(newnode);<span class="comment">//根节点加入优先队列</span></span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		livenode=q.<span class="built_in">top</span>();</span><br><span class="line">		q.<span class="built_in">pop</span>();</span><br><span class="line">		t=livenode.id;</span><br><span class="line">		<span class="keyword">if</span>(t==n)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(g[livenode.x[n<span class="number">-1</span>]][livenode.x[n]]!=INF&amp;&amp;g[livenode.x[n]][<span class="number">1</span>]!=INF)</span><br><span class="line">				<span class="keyword">if</span>(livenode.cl+g[livenode.x[n<span class="number">-1</span>]][livenode.x[n]]+g[livenode.x[n]][<span class="number">1</span>]&lt;bestl)</span><br><span class="line">				&#123;</span><br><span class="line">					bestl=livenode.cl+g[livenode.x[n<span class="number">-1</span>]][livenode.x[n]]+g[livenode.x[n]][<span class="number">1</span>];</span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">						bestx[i]=livenode.x[i];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(livenode.cl&gt;=bestl)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=t;j&lt;=n;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(g[livenode.x[t<span class="number">-1</span>]][livenode.x[j]]!=INF)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">double</span> cl=livenode.cl+g[livenode.x[t<span class="number">-1</span>]][livenode.x[j]];</span><br><span class="line">				<span class="keyword">if</span>(cl&lt;bestl)</span><br><span class="line">				&#123;</span><br><span class="line">					newnode=<span class="built_in">Node</span>(cl,t+<span class="number">1</span>);</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">						newnode.x[i]=livenode.x[i];</span><br><span class="line">					<span class="built_in">swap</span>(newnode.x[t],newnode.x[j]);</span><br><span class="line">					q.<span class="built_in">push</span>(newnode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> bestl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	bestl=INF;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">		bestx[i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j++)</span><br><span class="line">			g[i][j]=g[j][i]=INF;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短路径：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;bestx[i]&lt;&lt;<span class="string">&quot;---&gt;&quot;</span>;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;1&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短路径长度：&quot;</span>&lt;&lt;bestl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入景点数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入经典之间的连线数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入两个景点间的距离：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		g[u][v]=g[v][u]=w;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Travelbfs</span>();</span><br><span class="line">	<span class="built_in">Print</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化算法-4"><a href="#优化算法-4" class="headerlink" title="优化算法"></a>优化算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">double</span> g[N][N];</span><br><span class="line"><span class="keyword">double</span> minout[N];</span><br><span class="line"><span class="keyword">double</span> minsum;</span><br><span class="line"><span class="keyword">int</span> bestx[N];</span><br><span class="line"><span class="keyword">double</span> bestl;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">double</span> cl,rl,zl;</span><br><span class="line">    <span class="comment">//cl:当前已走过的路径长度</span></span><br><span class="line">    <span class="comment">//rl：剩余路径长度的下界</span></span><br><span class="line">    <span class="comment">//zl：当前路径长度的下界</span></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">int</span> x[N];</span><br><span class="line">	<span class="built_in">Node</span>()&#123;&#125;;</span><br><span class="line">	<span class="built_in">Node</span>(<span class="keyword">double</span> _cl,<span class="keyword">double</span> _rl,<span class="keyword">double</span> _zl,<span class="keyword">int</span> _id)</span><br><span class="line">	&#123;</span><br><span class="line">		cl=_cl;</span><br><span class="line">		rl=_rl;</span><br><span class="line">		zl=_zl;</span><br><span class="line">		id=_id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Node &amp;a,<span class="keyword">const</span> Node &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> a.zl&gt;b.zl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Bound</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> minl=INF;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			<span class="keyword">if</span>(g[i][j]!=INF&amp;&amp;g[i][j]&lt;minl)</span><br><span class="line">				minl=g[i][j];</span><br><span class="line">		<span class="keyword">if</span>(minl==INF)</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		minout[i]=minl;</span><br><span class="line">		minsum+=minl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Travelbfsopt</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!<span class="built_in">Bound</span>())</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	Node livenode,newnode;</span><br><span class="line">	priority_queue &lt;Node&gt; q;</span><br><span class="line">	newnode=<span class="built_in">Node</span>(<span class="number">0</span>,minsum,minsum,<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		newnode.x[i]=i;</span><br><span class="line">	q.<span class="built_in">push</span>(newnode);</span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		livenode=q.<span class="built_in">top</span>();</span><br><span class="line">		q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">int</span> t=livenode.id;</span><br><span class="line">		<span class="keyword">if</span>(t==n)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(g[livenode.x[n<span class="number">-1</span>]][livenode.x[n]]!=INF&amp;&amp;g[livenode.x[n]][<span class="number">1</span>]!=INF)</span><br><span class="line">				<span class="keyword">if</span>(livenode.cl+g[livenode.x[n<span class="number">-1</span>]][livenode.x[n]]+g[livenode.x[n]][<span class="number">1</span>]&lt;bestl)</span><br><span class="line">				&#123;</span><br><span class="line">					bestl=livenode.cl+g[livenode.x[n<span class="number">-1</span>]][livenode.x[n]]+g[livenode.x[n]][<span class="number">1</span>];</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">						bestx[i]=livenode.x[i];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(livenode.cl&gt;=bestl)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=t;j&lt;=n;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(g[livenode.x[t<span class="number">-1</span>]][livenode.x[j]]!=INF)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">double</span> cl=livenode.cl+g[livenode.x[t<span class="number">-1</span>]][livenode.x[j]];</span><br><span class="line">				<span class="keyword">double</span> rl=livenode.rl-minout[livenode.x[j]];</span><br><span class="line">				<span class="keyword">double</span> zl=cl+rl;</span><br><span class="line">				<span class="keyword">if</span>(zl&lt;bestl)</span><br><span class="line">				&#123;</span><br><span class="line">					newnode=<span class="built_in">Node</span>(cl,rl,zl,t+<span class="number">1</span>);</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">						newnode.x[i]=livenode.x[i];</span><br><span class="line">					<span class="built_in">swap</span>(newnode.x[t],newnode.x[j]);</span><br><span class="line">					q.<span class="built_in">push</span>(newnode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> bestl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	bestl=INF;</span><br><span class="line">	minsum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">		bestx[i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j++)</span><br><span class="line">			g[i][j]=g[j][i]=INF;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短路径：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;bestx[i]&lt;&lt;<span class="string">&quot;---&gt;&quot;</span>;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;1&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短路径长度：&quot;</span>&lt;&lt;bestl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入景点数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入经典之间的连线数：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入两个景点间的距离：&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		g[u][v]=g[v][u]=w;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Travelbfsopt</span>();</span><br><span class="line">	<span class="built_in">Print</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最优工程布线"><a href="#最优工程布线" class="headerlink" title="最优工程布线"></a>最优工程布线</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span><span class="comment">//io流控制头文件</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	<span class="keyword">int</span> y;</span><br><span class="line">&#125;Position;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> grid[<span class="number">100</span>][<span class="number">100</span>];<span class="comment">//地图</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">findpath</span><span class="params">(Position s,Position e,Position *&amp;path,<span class="keyword">int</span> &amp;PathLen)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>((s.x==e.x)&amp;&amp;(s.y==e.y))</span><br><span class="line">	&#123;<span class="comment">//判断是否起点就是终点</span></span><br><span class="line">		PathLen=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	Position DIR[<span class="number">4</span>],here,next;</span><br><span class="line">	DIR[<span class="number">0</span>].x=<span class="number">0</span>;<span class="comment">//方向数组dir</span></span><br><span class="line">	DIR[<span class="number">0</span>].y=<span class="number">1</span>;</span><br><span class="line">	DIR[<span class="number">1</span>].x=<span class="number">1</span>;</span><br><span class="line">	DIR[<span class="number">1</span>].y=<span class="number">0</span>;</span><br><span class="line">	DIR[<span class="number">2</span>].x=<span class="number">0</span>;</span><br><span class="line">	DIR[<span class="number">2</span>].y=<span class="number">-1</span>;</span><br><span class="line">	DIR[<span class="number">3</span>].x=<span class="number">-1</span>;</span><br><span class="line">	DIR[<span class="number">3</span>].y=<span class="number">0</span>;</span><br><span class="line">	here=s;</span><br><span class="line">	grid[s.x][s.y]=<span class="number">0</span>;<span class="comment">//标记初始为0，未布线为-1，墙壁为-2</span></span><br><span class="line">	queue&lt;Position&gt; Q;</span><br><span class="line">	<span class="keyword">for</span>(;;)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			next.x=here.x+DIR[i].x;</span><br><span class="line">			next.y=here.y+DIR[i].y;</span><br><span class="line">			<span class="keyword">if</span>(grid[next.x][next.y]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				grid[next.x][next.y]=grid[here.x][here.y]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(next);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>((next.x==e.x)&amp;&amp;(next.y==e.y))</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>((next.x==e.x)&amp;&amp;(next.y==e.y))</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">if</span>(Q.<span class="built_in">empty</span>())</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			here=Q.<span class="built_in">front</span>();</span><br><span class="line">			Q.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	PathLen=grid[e.x][e.y];</span><br><span class="line">	path=<span class="keyword">new</span> Position[PathLen];</span><br><span class="line">	here =e;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=PathLen<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)</span><br><span class="line">	&#123;</span><br><span class="line">		path[j]=here;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			next.x=here.x+DIR[i].x;</span><br><span class="line">			next.y=here.y+DIR[i].y;</span><br><span class="line">			<span class="keyword">if</span>(grid[next.x][next.y]==j)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		here=next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			grid[i][j]=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n+<span class="number">1</span>;i++)</span><br><span class="line">		grid[<span class="number">0</span>][i]=grid[m+<span class="number">1</span>][i]=<span class="number">-2</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=m+<span class="number">1</span>;i++)</span><br><span class="line">		grid[i][<span class="number">0</span>]=grid[i][n+<span class="number">1</span>]=<span class="number">-2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Position a,b,*way;</span><br><span class="line">	<span class="keyword">int</span> Len,m,n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入方阵大小M，N：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>(m,n);</span><br><span class="line">	<span class="keyword">while</span>(!(m==<span class="number">0</span>&amp;&amp;n==<span class="number">0</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;输入障碍物坐标x，y：（输入0 0结束）&quot;</span>&lt;&lt;endl;</span><br><span class="line">		cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">		grid[m][n]=<span class="number">-2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入起点坐标：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;a.x&gt;&gt;a.y;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入终点坐标：&quot;</span>;</span><br><span class="line">	cin&gt;&gt;b.x&gt;&gt;b.y;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">findpath</span>(a,b,way,Len))</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;最短路径的长度为：&quot;</span>&lt;&lt;Len&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;最佳路径坐标为：&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;Len;i++)</span><br><span class="line">			cout&lt;&lt;<span class="built_in">setw</span>(<span class="number">2</span>)&lt;&lt;way[i].x&lt;&lt;<span class="built_in">setw</span>(<span class="number">2</span>)&lt;&lt;way[i].y&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;任务无法完成&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="线性规划网络流"><a href="#线性规划网络流" class="headerlink" title="线性规划网络流"></a>线性规划网络流</h1><p>线性规划是指从各种限制条件的组合中，选择处最为合理的计算方法，建立线性规划模型，从而求得最佳结果。</p>
<h2 id="单纯形算法"><a href="#单纯形算法" class="headerlink" title="单纯形算法"></a>单纯形算法</h2><ul>
<li>基本变量：每个约束条件中的系数为正且只出现在一个约束条件中的变量。</li>
<li>非基本变量：除基本变量外的其它变量。</li>
<li>基本可行解：满足标准形式约束条件的可行解。</li>
<li>检验数：目标函数中非基本变量的系数。</li>
</ul>
<p>线性规划基本定理：</p>
<ol>
<li>最优判别定理：若目标函数中关于非基本变量的所有系数小于等于0，则当前基本可行解就是最优解。</li>
<li>无穷多最优解判别定理：若目标函数中关于非基本变量的所有检验数小于等于0，同时存在某个非基本变量的检验数等于0，则线性规划问题有无穷多个解。</li>
<li>无界解定理：如果某个c_j检验数大于0，而c_j所对应的列向量的各分量a_1j,a_2j,…a_mj都小于等于0，则该线性规划问题有无界解。</li>
</ol>
<p>单纯形表变换：</p>
<ul>
<li>入基列=-原值/交叉位值（不包括交叉位）</li>
<li>离基行：原值/交叉位值（不包括交叉位）</li>
<li>交叉位：取原值倒数</li>
<li>C_0位：原值+同行入基列元素*同列离基行/交叉位值</li>
<li>一般位置元素=原值-同行入基列元素*同列离基行/交叉位值</li>
</ul>
<h2 id="工厂最大效益"><a href="#工厂最大效益" class="headerlink" title="工厂最大效益"></a>工厂最大效益</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">float</span> kernal[<span class="number">100</span>][<span class="number">100</span>];<span class="comment">//存储非单纯形表</span></span><br><span class="line"><span class="keyword">char</span> FJL[<span class="number">100</span>]=&#123;&#125;;<span class="comment">//非基本变量</span></span><br><span class="line"><span class="keyword">char</span> JL[<span class="number">100</span>]=&#123;&#125;;<span class="comment">//基本变量</span></span><br><span class="line"><span class="keyword">int</span> n,m,i,j;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span><span class="comment">//输出单纯形表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-------单纯形表如下：-------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;<span class="built_in">setw</span>(<span class="number">7</span>)&lt;&lt;<span class="string">&quot;b &quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="built_in">setw</span>(<span class="number">7</span>)&lt;&lt;<span class="string">&quot;x&quot;</span>&lt;&lt;FJL[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;c &quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(i&gt;=<span class="number">1</span>)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;x&quot;</span>&lt;&lt;JL[i];</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">			cout&lt;&lt;<span class="built_in">setw</span>(<span class="number">7</span>)&lt;&lt;kernal[i][j]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DCXA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> max1,max2;<span class="comment">//max1存放最大的检验数，max2存放最大正检验数对应的基本变量的最大系数</span></span><br><span class="line">	<span class="keyword">int</span> e=<span class="number">-1</span>;<span class="comment">//记录入基列</span></span><br><span class="line">	<span class="keyword">int</span> k=<span class="number">-1</span>;<span class="comment">//记录离基列</span></span><br><span class="line">	<span class="keyword">float</span> min;</span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)<span class="comment">//循环迭代，直到找到问题的解或无解为止</span></span><br><span class="line">	&#123;</span><br><span class="line">		max1=max2=<span class="number">0</span>;</span><br><span class="line">		min=<span class="number">1000000</span>;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=m;j++)<span class="comment">//找入基列，即最大正检验数对应的列</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(max1&lt;kernal[<span class="number">0</span>][j])</span><br><span class="line">			&#123;</span><br><span class="line">				max1=kernal[<span class="number">0</span>][j];</span><br><span class="line">				e=j;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(max1&lt;=<span class="number">0</span>)<span class="comment">//最大值&lt;=0，即所有检验数&lt;=0，满足获得最优解的条件</span></span><br><span class="line">		&#123;</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;获得最优解：&quot;</span>&lt;&lt;kernal[<span class="number">0</span>][<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">			<span class="built_in">print</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//找离基行，即常数列/入基列正比值最小对应的行</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(max2&lt;kernal[i][e])</span><br><span class="line">				max2=kernal[i][e];</span><br><span class="line">			<span class="keyword">float</span> temp=kernal[i][<span class="number">0</span>]/kernal[i][e];</span><br><span class="line">			<span class="keyword">if</span>(temp&gt;<span class="number">0</span>&amp;&amp;temp&lt;min)<span class="comment">//找离基变量</span></span><br><span class="line">			&#123;</span><br><span class="line">				min=temp;</span><br><span class="line">				k=i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;基列变量：&quot;</span>&lt;&lt;<span class="string">&quot;x&quot;</span>&lt;&lt;FJL[e]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;离基变量：&quot;</span>&lt;&lt;<span class="string">&quot;x&quot;</span>&lt;&lt;JL[k]&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">if</span>(max2==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;解无界&quot;</span>&lt;&lt;endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">//变基变换</span></span><br><span class="line">		<span class="keyword">char</span> temp=FJL[e];</span><br><span class="line">		FJL[e]=JL[k];</span><br><span class="line">		JL[k]=temp;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)<span class="comment">//计算除入基列和出基行的所有位置的元素</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(i!=k)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span>(j!=e)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span>(i==<span class="number">0</span>&amp;&amp;j==<span class="number">0</span>)<span class="comment">//计算特殊位c0，即目标函数的值</span></span><br><span class="line">							kernal[i][j]=kernal[i][j]+kernal[i][e]*kernal[k][j]/kernal[k][e];</span><br><span class="line">						<span class="keyword">else</span><span class="comment">//计算一般位置的值</span></span><br><span class="line">							kernal[i][j]=kernal[i][j]-kernal[i][e]*kernal[k][j]/kernal[k][e];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)<span class="comment">//计算离基行的元素的值</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(i!=k)</span><br><span class="line">				kernal[i][e]=-kernal[i][e]/kernal[k][e];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=m;j++)<span class="comment">//计算入基列元素的值</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(j!=e)</span><br><span class="line">				kernal[k][j]=kernal[k][j]/kernal[k][e];</span><br><span class="line">		&#125;</span><br><span class="line">		kernal[k][e]=<span class="number">1</span>/kernal[k][e];<span class="comment">//计算交叉位元素的值</span></span><br><span class="line">		<span class="built_in">print</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入非基本变量个数和非基本变量下标：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		cin&gt;&gt;FJL[i];</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入基本变量个数和基本变量下标：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cin&gt;&gt;JL[i];</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入约束标准型初始单纯形表参数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">			cin&gt;&gt;kernal[i][j];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">print</span>();</span><br><span class="line">	<span class="built_in">DCXA</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最大网络流"><a href="#最大网络流" class="headerlink" title="最大网络流"></a>最大网络流</h2><p>网络是一个有向带权图，包含一个源点和一个汇点，没有反平行边。</p>
<p>网络流：网络流即网络上的流，是定义在网络边集E上的一个非负函数flow={flow(u,v)}，flow(u,v)是边上的流量。</p>
<p>可行流：满足容量约束和流量守恒的流。</p>
<p>网络最大流：在满足容量约束和流量守恒的前提下，在网络流中找到一个净输出最大的网络流。</p>
<p>实流网络：只显示实际流量的网络。不显示容量。</p>
<p>残余网络：与网络边对应的同向边是可增量（即还可以增加多少流量），反向边是实际流量。</p>
<p>可增广路是残余网络中一条从源点到汇点的简单路径。</p>
<p>可增广量是指在可增广路p上每条边可以增加的流量最小值。</p>
<h3 id="最短增广路算法（Edmonds-Karp算法）"><a href="#最短增广路算法（Edmonds-Karp算法）" class="headerlink" title="最短增广路算法（Edmonds-Karp算法）"></a>最短增广路算法（Edmonds-Karp算法）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">int</span> g[maxn][maxn];<span class="comment">//残余网络</span></span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn];<span class="comment">//实流网络</span></span><br><span class="line"><span class="keyword">int</span> pre[maxn];<span class="comment">//前驱数组</span></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];<span class="comment">//访问数组</span></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(pre,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(pre));</span><br><span class="line">	<span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">	vis[s]=<span class="literal">true</span>;</span><br><span class="line">	q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> now=q.<span class="built_in">front</span>();</span><br><span class="line">		q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//寻找可增广路</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!vis[i]&amp;&amp;g[now][i]&gt;<span class="number">0</span>)<span class="comment">//未被访问且有边相连</span></span><br><span class="line">			&#123;</span><br><span class="line">				vis[i]=<span class="literal">true</span>;</span><br><span class="line">				pre[i]=now;</span><br><span class="line">				<span class="keyword">if</span>(i==t)<span class="comment">//找到一条可增广路</span></span><br><span class="line">					<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">				q.<span class="built_in">push</span>(i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//找不到可增广路</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">EK</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> v,w,d,maxflow;</span><br><span class="line">	maxflow=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">bfs</span>(s,t))<span class="comment">//可以增广</span></span><br><span class="line">	&#123;</span><br><span class="line">		v=t;</span><br><span class="line">		d=INF;</span><br><span class="line">		<span class="keyword">while</span>(v!=s)<span class="comment">//找可增量</span></span><br><span class="line">		&#123;</span><br><span class="line">			w=pre[v];<span class="comment">//记录v的前驱</span></span><br><span class="line">			<span class="keyword">if</span>(d&gt;g[w][v])</span><br><span class="line">				d=g[w][v];</span><br><span class="line">			v=w;</span><br><span class="line">		&#125;</span><br><span class="line">		maxflow+=d;</span><br><span class="line">		v=t;</span><br><span class="line">		<span class="keyword">while</span>(v!=s)<span class="comment">//沿可增广路增流</span></span><br><span class="line">		&#123;</span><br><span class="line">			w=pre[v];</span><br><span class="line">			g[w][v]-=d;<span class="comment">//残余网络中正向边减流</span></span><br><span class="line">			g[v][w]+=d;<span class="comment">//残余网络中反向边增流</span></span><br><span class="line">			<span class="keyword">if</span>(f[v][w]&gt;<span class="number">0</span>)<span class="comment">//实流网络中如果是反向边则减流，反之增流</span></span><br><span class="line">				f[v][w]-=d;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				f[w][v]+=d;</span><br><span class="line">			v=w;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> maxflow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span><span class="comment">//输出实流网络</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-------实流网络如下：-------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			cout&lt;&lt;<span class="built_in">setw</span>(<span class="number">7</span>)&lt;&lt;f[i][j]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w;</span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	<span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(f));</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点个数和边数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入两个节点u，v及边（u--v）的容量w：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		g[u][v]+=w;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;网络的最大流值：&quot;</span>&lt;&lt;<span class="built_in">EK</span>(<span class="number">1</span>,n)&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">print</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="重贴标签算法ISAP"><a href="#重贴标签算法ISAP" class="headerlink" title="重贴标签算法ISAP"></a>重贴标签算法ISAP</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">100000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> h[N],pre[N],g[N];<span class="comment">//h数组记录每个节点的高度，即到汇点的最短距离</span></span><br><span class="line"><span class="comment">//g数组记录距离为h[]的节点的个数</span></span><br><span class="line"><span class="comment">//pre数组记录当前节点的前驱边</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span>//邻接表头节点</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>//边结构体</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));<span class="comment">//初始化邻接表头节点第一个邻接边为-1</span></span><br><span class="line">	top=<span class="number">0</span>;<span class="comment">//初始化边的下标为0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span><span class="comment">//创建边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].next=V[u].first;<span class="comment">//链接到邻接表中</span></span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span><span class="comment">//添加两条边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_h</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span><span class="comment">//标高函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue &lt;<span class="keyword">int</span>&gt;Q;<span class="comment">//创建一个队列，用于广度优先搜索</span></span><br><span class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(h));<span class="comment">//初始化高度函数为-1</span></span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	h[t]=<span class="number">0</span>;<span class="comment">//初始化汇点的高度为0</span></span><br><span class="line">	Q.<span class="built_in">push</span>(t);<span class="comment">//入队</span></span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=Q.<span class="built_in">front</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		++g[h[v]];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=V[v].first;~i;i=E[i].next)</span><br><span class="line">		&#123;<span class="comment">//读节点v的邻接边标号</span></span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(h[u]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				h[u]=h[v]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;初始化高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;h[ ]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Isap</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">set_h</span>(t,n);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,u=s;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">while</span>(h[s]&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i=V[u].first;</span><br><span class="line">		<span class="keyword">if</span>(u==s)</span><br><span class="line">			d=INF;</span><br><span class="line">		<span class="keyword">for</span>(;~i;i=E[i].next)<span class="comment">//搜索当前节点的邻接边</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;h[u]==h[v]+<span class="number">1</span>)</span><br><span class="line">			&#123;<span class="comment">//沿有可增量和高度减1的方向搜索</span></span><br><span class="line">				u=v;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">				<span class="keyword">if</span>(u==t)</span><br><span class="line">				&#123;<span class="comment">//到达汇点，找到一条增广路径</span></span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">					<span class="keyword">while</span>(u!=s)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">int</span> j=pre[u];</span><br><span class="line">                        <span class="comment">//j为u的前驱边，即增广路上j为u的入边</span></span><br><span class="line">						E[j].flow+=d;</span><br><span class="line">                        <span class="comment">//j边的流量+d</span></span><br><span class="line">						E[j^<span class="number">1</span>].flow-=d;</span><br><span class="line">                        <span class="comment">//j的反向边的流量-d</span></span><br><span class="line">						u=E[j^<span class="number">1</span>].v;</span><br><span class="line">                        <span class="comment">/*j^1表示j和1的与运算，因为创建边时是成对创建的，0号边的反向边是1号，二进制0和1的与运算正好是1号，即2号边的反向边是3号，二进制10和1的与运算正好是11，即3号，因此当前边号和1的与运算可以得到当前边的反向边*/</span></span><br><span class="line">						cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;u;<span class="comment">//向前搜索</span></span><br><span class="line">					&#125;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">					ans+=d;</span><br><span class="line">					d=INF;</span><br><span class="line">				&#125;</span><br><span class="line">			<span class="keyword">break</span>;	<span class="comment">//找到一条可行邻接边，退出for语句，继续向前走</span></span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)<span class="comment">//当前节点的所有邻接边均搜索完毕，无法行进</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(--g[h[u]]==<span class="number">0</span>)<span class="comment">//如果该高度的节点只有1个，算法结束</span></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> hmin=n<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)<span class="comment">//搜索u的所有邻接边</span></span><br><span class="line">				<span class="keyword">if</span>(E[j].cap&gt;E[j].flow)<span class="comment">//有可增量</span></span><br><span class="line">					hmin=<span class="built_in">min</span>(hmin,h[E[j].v]);<span class="comment">//取所有邻接点高度的最小值</span></span><br><span class="line">			h[u]=hmin+<span class="number">1</span>;<span class="comment">//重新标高：所有邻接点高度的最小值+1</span></span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;重贴标签后高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;h[ ]=&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			++g[h[u]];<span class="comment">//重新标高后该高度的节点数+1</span></span><br><span class="line">			<span class="keyword">if</span>(u!=s)<span class="comment">//如果当前结点不是源点</span></span><br><span class="line">				u=E[pre[u]^<span class="number">1</span>].v;<span class="comment">//向前退回一步，重新搜索增广路</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出网络邻接表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----网络邻接表如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printflow</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出实流边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----实流边如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			<span class="keyword">if</span>(E[j].flow&gt;<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow;</span><br><span class="line">				cout&lt;&lt;endl;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w;</span><br><span class="line">	<span class="keyword">int</span> n,m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点个数和边数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入两个节点u，v及边（u--v）的容量w：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">		<span class="built_in">add</span>(u,v,w);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;网络的最大流值：&quot;</span>&lt;&lt;<span class="built_in">Isap</span>(<span class="number">1</span>,n,n)&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(n);</span><br><span class="line">	<span class="built_in">printflow</span>(n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最小费用最大流"><a href="#最小费用最大流" class="headerlink" title="最小费用最大流"></a>最小费用最大流</h2><h3 id="最小费用路算法"><a href="#最小费用路算法" class="headerlink" title="最小费用路算法"></a>最小费用路算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">100000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> dist[N],pre[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="keyword">int</span> c[N];</span><br><span class="line"><span class="keyword">int</span> maxflow;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow,cost;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">	maxflow=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c,<span class="keyword">int</span> cost)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].cost=cost;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c,<span class="keyword">int</span> cost)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c,cost);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>,-cost);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,u,v;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;qu;</span><br><span class="line">	<span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	<span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(c));</span><br><span class="line">	<span class="built_in">memset</span>(pre,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(pre));</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		dist[i]=INF;</span><br><span class="line">	vis[s]=<span class="literal">true</span>;</span><br><span class="line">	c[s]++;</span><br><span class="line">	dist[s]=<span class="number">0</span>;</span><br><span class="line">	qu.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span>(!qu.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		u=qu.<span class="built_in">front</span>();</span><br><span class="line">		qu.<span class="built_in">pop</span>();</span><br><span class="line">		vis[u]=<span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=V[u].first;i!=<span class="number">-1</span>;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;dist[v]&gt;dist[u]+E[i].cost)</span><br><span class="line">			&#123;</span><br><span class="line">				dist[v]=dist[u]+E[i].cost;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				<span class="keyword">if</span>(!vis[v])</span><br><span class="line">				&#123;</span><br><span class="line">					c[v]++;</span><br><span class="line">					qu.<span class="built_in">push</span>(v);</span><br><span class="line">					vis[v]=<span class="literal">true</span>;</span><br><span class="line">					<span class="keyword">if</span>(c[v]&gt;n)</span><br><span class="line">						<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短路数组&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;dist[ ]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;dist[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">if</span>(dist[t]==INF)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MCMF</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">int</span> i,mincost;</span><br><span class="line">	mincost=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">SPFA</span>(s,t,n))</span><br><span class="line">	&#123;</span><br><span class="line">		d=INF;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">		<span class="keyword">for</span>(i=pre[t];i!=<span class="number">-1</span>;i=pre[E[i^<span class="number">1</span>].v])</span><br><span class="line">		&#123;</span><br><span class="line">			d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;E[i^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		maxflow+=d;</span><br><span class="line">		<span class="keyword">for</span>(i=pre[t];i!=<span class="number">-1</span>;i=pre[E[i^<span class="number">1</span>].v])</span><br><span class="line">		&#123;</span><br><span class="line">			E[i].flow+=d;</span><br><span class="line">			E[i^<span class="number">1</span>].flow-=d;</span><br><span class="line">		&#125;</span><br><span class="line">		mincost+=dist[t]*d;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> mincost;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出网络邻接表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----网络邻接表如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cost&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printflow</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出实流边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----实流边如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			<span class="keyword">if</span>(E[j].flow&gt;<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cost;</span><br><span class="line">				cout&lt;&lt;endl;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,w,c;</span><br><span class="line">	<span class="keyword">int</span> n,m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入节点个数和边数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入两个节点u，v及边（u--v）的容量w,单位容量费用c：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v&gt;&gt;w&gt;&gt;c;</span><br><span class="line">		<span class="built_in">add</span>(u,v,w,c);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(n);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;网络的最小费用为：&quot;</span>&lt;&lt;<span class="built_in">MCMF</span>(<span class="number">1</span>,n,n)&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;网络的最大流值：&quot;</span>&lt;&lt;maxflow&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(n);</span><br><span class="line">	<span class="built_in">printflow</span>(n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="消圈算法"><a href="#消圈算法" class="headerlink" title="消圈算法"></a>消圈算法</h3><p>过程：</p>
<ol>
<li>找出给定网络的最大流。</li>
<li>在最大流对应的混合网络中找负费用圈。</li>
<li>消负费用圈：负费用圈同方向的边流量加d，反方向的边流量减d。d为负费用圈的所有边的最小可增量cap-flow。</li>
</ol>
<h2 id="配对方案问题"><a href="#配对方案问题" class="headerlink" title="配对方案问题"></a>配对方案问题</h2><p>二分图：又称作二部图，是图论中的一种特殊模型。设G=（V，E）是一个无向图，如果节点集V可分割为两个互不相交的子集（V1，V2），并且图中的每条边（i，j）所关联的两个节点i和j分别属于这两个不同的节点集，则称图G为一个二分图。</p>
<p>匹配：在图论中，一个匹配是一个边的集合，其中任意两条边都没有公共节点。</p>
<p>最大匹配：一个图所有匹配中，边数最多的匹配。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">100000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> h[N],pre[N],g[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_h</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;Q;</span><br><span class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(h));</span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	h[t]=<span class="number">0</span>;</span><br><span class="line">	Q.<span class="built_in">push</span>(t);</span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=Q.<span class="built_in">front</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		++g[h[v]];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=V[v].first;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(h[u]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				h[u]=h[v]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;初始化高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Isap</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">set_h</span>(t,n);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,u=s;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">while</span>(h[s]&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i=V[u].first;</span><br><span class="line">		<span class="keyword">if</span>(u==s)</span><br><span class="line">			d=INF;</span><br><span class="line">		<span class="keyword">for</span>(;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;h[u]==h[v]+<span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				u=v;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">				<span class="keyword">if</span>(u==t)</span><br><span class="line">				&#123;</span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">					<span class="keyword">while</span>(u!=s)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">int</span> j=pre[u];</span><br><span class="line">						E[j].flow+=d;</span><br><span class="line">						E[j^<span class="number">1</span>].flow-=d;</span><br><span class="line">						u=E[j^<span class="number">1</span>].v;</span><br><span class="line">						cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;u;</span><br><span class="line">					&#125;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">					ans+=d;</span><br><span class="line">					d=INF;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(--g[h[u]]==<span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> hmin=n<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)</span><br><span class="line">				<span class="keyword">if</span>(E[j].cap&gt;E[j].flow)</span><br><span class="line">					hmin=<span class="built_in">min</span>(hmin,h[E[j].v]);</span><br><span class="line">			h[u]=hmin+<span class="number">1</span>;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;重贴标签后高度：&quot;</span>&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			++g[h[u]];</span><br><span class="line">			<span class="keyword">if</span>(u!=s)</span><br><span class="line">				u=E[pre[u]^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出网络邻接表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----网络邻接表如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printflow</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出实流边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----配对方案如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			<span class="keyword">if</span>(E[j].flow&gt;<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout&lt;&lt;i&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;E[j].v&lt;&lt;endl;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,total;</span><br><span class="line">	<span class="keyword">int</span> n,m;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入男推销员和女推销员的人数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	total=m+n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="built_in">add</span>(<span class="number">0</span>,i,<span class="number">1</span>);<span class="comment">//源点到女推销员的边</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=m+<span class="number">1</span>;j&lt;=total;j++)</span><br><span class="line">		<span class="built_in">add</span>(j,total+<span class="number">1</span>,<span class="number">1</span>);<span class="comment">//男推销员到汇点的边</span></span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入可以配合的女推销员编号和男推销员编号（两个都为-1结束）：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">while</span>(cin&gt;&gt;u&gt;&gt;v,u+v!=<span class="number">-2</span>)</span><br><span class="line">		<span class="built_in">add</span>(u,v,<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最大配对数：&quot;</span>&lt;&lt;<span class="built_in">Isap</span>(<span class="number">0</span>,total+<span class="number">1</span>,total+<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	<span class="built_in">printflow</span>(m);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化–匈牙利算法"><a href="#优化–匈牙利算法" class="headerlink" title="优化–匈牙利算法"></a>优化–匈牙利算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">100000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> match[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">memset</span>(match,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(match));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">maxmatch</span><span class="params">(<span class="keyword">int</span> u)</span><span class="comment">//为u找匹配点，找到返回true，否则返回false</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> v;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)<span class="comment">//检查u的所有邻接边</span></span><br><span class="line">	&#123;</span><br><span class="line">		v=E[j].v;<span class="comment">//u的邻接点v</span></span><br><span class="line">		<span class="keyword">if</span>(!vis[v])</span><br><span class="line">		&#123;</span><br><span class="line">			vis[v]=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span>(!match[v]||<span class="built_in">maxmatch</span>(match[v]))</span><br><span class="line">			&#123; <span class="comment">//v未匹配或者为v的匹配点找到了其它匹配</span></span><br><span class="line">				match[u]=v;</span><br><span class="line">				match[v]=u;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//所有的邻接边都检查完毕，未找到匹配点</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出网络邻接表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----网络邻接表如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//输出实流边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-----配对方案如下：-----&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">if</span>(match[i])</span><br><span class="line">			cout&lt;&lt;i&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;match[i]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v,total;</span><br><span class="line">	<span class="keyword">int</span> n,m,num=<span class="number">0</span>;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入男推销员和女推销员的人数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	total=m+n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入可以配合的女推销员编号和男推销员编号（两个都为-1结束）：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">while</span>(cin&gt;&gt;u&gt;&gt;v,u+v!=<span class="number">-2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">add</span>(u,v);</span><br><span class="line">		<span class="built_in">add</span>(v,u);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">maxmatch</span>(i))</span><br><span class="line">			num++;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最大配对数：&quot;</span>&lt;&lt;num&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">print</span>(m);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="圆桌问题"><a href="#圆桌问题" class="headerlink" title="圆桌问题"></a>圆桌问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> h[N],pre[N],g[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_h</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;Q;</span><br><span class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(h));</span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	h[t]=<span class="number">0</span>;</span><br><span class="line">	Q.<span class="built_in">push</span>(t);</span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=Q.<span class="built_in">front</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		++g[h[v]];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=V[v].first;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(h[u]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				h[u]=h[v]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;初始化高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Isap</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">set_h</span>(t,n);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,u=s;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">while</span>(h[s]&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i=V[u].first;</span><br><span class="line">		<span class="keyword">if</span>(u==s)</span><br><span class="line">			d=INF;</span><br><span class="line">		<span class="keyword">for</span>(;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;h[u]==h[v]+<span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				u=v;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">				<span class="keyword">if</span>(u==t)</span><br><span class="line">				&#123;</span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">					<span class="keyword">while</span>(u!=s)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">int</span> j=pre[u];</span><br><span class="line">						E[j].flow+=d;</span><br><span class="line">						E[j^<span class="number">1</span>].flow-=d;</span><br><span class="line">						u=E[j^<span class="number">1</span>].v;</span><br><span class="line">						cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;u;</span><br><span class="line">					&#125;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">					ans+=d;</span><br><span class="line">					d=INF;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(--g[h[u]]==<span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> hmin=n<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)</span><br><span class="line">				<span class="keyword">if</span>(E[j].cap&gt;E[j].flow)</span><br><span class="line">					hmin=<span class="built_in">min</span>(hmin,h[E[j].v]);</span><br><span class="line">			h[u]=hmin+<span class="number">1</span>;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;重贴标签后高度：&quot;</span>&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			++g[h[u]];</span><br><span class="line">			<span class="keyword">if</span>(u!=s)</span><br><span class="line">				u=E[pre[u]^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-------网络邻接表如下：-------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;安排方案如下：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;每个代表团的安排情况：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;个代表团的安排的情况：&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			<span class="keyword">if</span>(E[j].flow==<span class="number">1</span>)</span><br><span class="line">				cout&lt;&lt;E[j].v-m&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m,sum=<span class="number">0</span>,total;</span><br><span class="line">	<span class="keyword">int</span> cost;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入代表团数n和会议桌数m:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	total=m+n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个代表团的人数:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;cost;</span><br><span class="line">		sum+=cost;</span><br><span class="line">		<span class="built_in">add</span>(<span class="number">0</span>,i,cost);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个会议桌可安排人数：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=m+<span class="number">1</span>;j&lt;=total;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;cost;</span><br><span class="line">		<span class="built_in">add</span>(j,total+<span class="number">1</span>,cost);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=m+<span class="number">1</span>;j&lt;=total;j++)</span><br><span class="line">			<span class="built_in">add</span>(i,j,<span class="number">1</span>);</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">if</span>(sum==<span class="built_in">Isap</span>(<span class="number">0</span>,total+<span class="number">1</span>,total+<span class="number">2</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;会议桌安排成功。&quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">print</span>(m);</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;无法安排所有代表团。&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="试题库问题"><a href="#试题库问题" class="headerlink" title="试题库问题"></a>试题库问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> h[N],pre[N],g[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_h</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;Q;</span><br><span class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(h));</span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	h[t]=<span class="number">0</span>;</span><br><span class="line">	Q.<span class="built_in">push</span>(t);</span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=Q.<span class="built_in">front</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		++g[h[v]];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=V[v].first;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(h[u]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				h[u]=h[v]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;初始化高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Isap</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">set_h</span>(t,n);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,u=s;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">while</span>(h[s]&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i=V[u].first;</span><br><span class="line">		<span class="keyword">if</span>(u==s)</span><br><span class="line">			d=INF;</span><br><span class="line">		<span class="keyword">for</span>(;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;h[u]==h[v]+<span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				u=v;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">				<span class="keyword">if</span>(u==t)</span><br><span class="line">				&#123;</span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">					<span class="keyword">while</span>(u!=s)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">int</span> j=pre[u];</span><br><span class="line">						E[j].flow+=d;</span><br><span class="line">						E[j^<span class="number">1</span>].flow-=d;</span><br><span class="line">						u=E[j^<span class="number">1</span>].v;</span><br><span class="line">						cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;u;</span><br><span class="line">					&#125;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">					ans+=d;</span><br><span class="line">					d=INF;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(--g[h[u]]==<span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> hmin=n<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)</span><br><span class="line">				<span class="keyword">if</span>(E[j].cap&gt;E[j].flow)</span><br><span class="line">					hmin=<span class="built_in">min</span>(hmin,h[E[j].v]);</span><br><span class="line">			h[u]=hmin+<span class="number">1</span>;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;重贴标签后高度：&quot;</span>&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			++g[h[u]];</span><br><span class="line">			<span class="keyword">if</span>(u!=s)</span><br><span class="line">				u=E[pre[u]^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-------网络邻接表如下：-------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;试题抽取方案：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;个题型抽取的试题号：&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			<span class="keyword">if</span>(E[j].flow==<span class="number">1</span>)</span><br><span class="line">				cout&lt;&lt;E[j].v-m&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m,sum=<span class="number">0</span>,total;</span><br><span class="line">	<span class="keyword">int</span> cost,num;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入题型数m和试题总数n:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	total=m+n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每种题型选择的数量:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;cost;</span><br><span class="line">		sum+=cost;</span><br><span class="line">		<span class="built_in">add</span>(<span class="number">0</span>,i,cost);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每个试题所属的题型（0结束）：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=m+<span class="number">1</span>;j&lt;=total;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(cin&gt;&gt;num,num)</span><br><span class="line">			<span class="built_in">add</span>(num,j,<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">add</span>(j,total+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">if</span>(sum==<span class="built_in">Isap</span>(<span class="number">0</span>,total+<span class="number">1</span>,total+<span class="number">2</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;抽取试题成功。&quot;</span>;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">print</span>(m);</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;抽取试题不成功。&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最大收益问题"><a href="#最大收益问题" class="headerlink" title="最大收益问题"></a>最大收益问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> h[N],pre[N],g[N];</span><br><span class="line"><span class="keyword">bool</span> flag[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_h</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;Q;</span><br><span class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(h));</span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	h[t]=<span class="number">0</span>;</span><br><span class="line">	Q.<span class="built_in">push</span>(t);</span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=Q.<span class="built_in">front</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		++g[h[v]];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=V[v].first;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(h[u]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				h[u]=h[v]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;初始化高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Isap</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">set_h</span>(t,n);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,u=s;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">while</span>(h[s]&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i=V[u].first;</span><br><span class="line">		<span class="keyword">if</span>(u==s)</span><br><span class="line">			d=INF;</span><br><span class="line">		<span class="keyword">for</span>(;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;h[u]==h[v]+<span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				u=v;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">				<span class="keyword">if</span>(u==t)</span><br><span class="line">				&#123;</span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">					<span class="keyword">while</span>(u!=s)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">int</span> j=pre[u];</span><br><span class="line">						E[j].flow+=d;</span><br><span class="line">						E[j^<span class="number">1</span>].flow-=d;</span><br><span class="line">						u=E[j^<span class="number">1</span>].v;</span><br><span class="line">						cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;u;</span><br><span class="line">					&#125;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">					ans+=d;</span><br><span class="line">					d=INF;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(--g[h[u]]==<span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> hmin=n<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)</span><br><span class="line">				<span class="keyword">if</span>(E[j].cap&gt;E[j].flow)</span><br><span class="line">					hmin=<span class="built_in">min</span>(hmin,h[E[j].v]);</span><br><span class="line">			h[u]=hmin+<span class="number">1</span>;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;重贴标签后高度：&quot;</span>&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			++g[h[u]];</span><br><span class="line">			<span class="keyword">if</span>(u!=s)</span><br><span class="line">				u=E[pre[u]^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-------网络邻接表如下：-------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=V[s].first;~i;i=E[i].next)</span><br><span class="line">		<span class="keyword">if</span>(E[i].cap&gt;E[i].flow)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(!flag[u])</span><br><span class="line">			&#123;</span><br><span class="line">				flag[u]=<span class="literal">true</span>;</span><br><span class="line">				<span class="built_in">DFS</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最大收益方案：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">DFS</span>(<span class="number">0</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;选中的实验编号：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="keyword">if</span>(flag[i])</span><br><span class="line">			cout&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;选中的仪器编号：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=m+<span class="number">1</span>;i&lt;=m+n;i++)</span><br><span class="line">		<span class="keyword">if</span>(flag[i])</span><br><span class="line">			cout&lt;&lt;i-m&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m,sum=<span class="number">0</span>,total;</span><br><span class="line">	<span class="keyword">int</span> cost,num;</span><br><span class="line">	<span class="built_in">memset</span>(flag,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(flag));</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入实验数m和仪器数n:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	total=m+n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入实验产生的效益和该实验所需要的仪器编号（0结束）:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;cost;</span><br><span class="line">		sum+=cost;</span><br><span class="line">		<span class="built_in">add</span>(<span class="number">0</span>,i,cost);</span><br><span class="line">		<span class="keyword">while</span>(cin&gt;&gt;num,num)</span><br><span class="line">			<span class="built_in">add</span>(i,m+num,INF);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入所有仪器的费用：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=m+<span class="number">1</span>;j&lt;=total;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;cost;</span><br><span class="line">		<span class="built_in">add</span>(j,total+<span class="number">1</span>,cost);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最大净收益：&quot;</span>&lt;&lt;sum-<span class="built_in">Isap</span>(<span class="number">0</span>,total+<span class="number">1</span>,total+<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">print</span>(m,n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="方格取数问题"><a href="#方格取数问题" class="headerlink" title="方格取数问题"></a>方格取数问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> h[N],pre[N],g[N];</span><br><span class="line"><span class="keyword">bool</span> flag[N*N];</span><br><span class="line"><span class="keyword">bool</span> dfsflag[N*N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_h</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt;Q;</span><br><span class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(h));</span><br><span class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(g));</span><br><span class="line">	h[t]=<span class="number">0</span>;</span><br><span class="line">	Q.<span class="built_in">push</span>(t);</span><br><span class="line">	<span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=Q.<span class="built_in">front</span>();</span><br><span class="line">		Q.<span class="built_in">pop</span>();</span><br><span class="line">		++g[h[v]];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=V[v].first;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(h[u]==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				h[u]=h[v]+<span class="number">1</span>;</span><br><span class="line">				Q.<span class="built_in">push</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;初始化高度&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Isap</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">set_h</span>(t,n);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,u=s;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	<span class="keyword">while</span>(h[s]&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i=V[u].first;</span><br><span class="line">		<span class="keyword">if</span>(u==s)</span><br><span class="line">			d=INF;</span><br><span class="line">		<span class="keyword">for</span>(;~i;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;h[u]==h[v]+<span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				u=v;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">				<span class="keyword">if</span>(u==t)</span><br><span class="line">				&#123;</span><br><span class="line">					cout&lt;&lt;endl;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">					<span class="keyword">while</span>(u!=s)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">int</span> j=pre[u];</span><br><span class="line">						E[j].flow+=d;</span><br><span class="line">						E[j^<span class="number">1</span>].flow-=d;</span><br><span class="line">						u=E[j^<span class="number">1</span>].v;</span><br><span class="line">						cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;u;</span><br><span class="line">					&#125;</span><br><span class="line">					cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">					ans+=d;</span><br><span class="line">					d=INF;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(--g[h[u]]==<span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> hmin=n<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=V[u].first;~j;j=E[j].next)</span><br><span class="line">				<span class="keyword">if</span>(E[j].cap&gt;E[j].flow)</span><br><span class="line">					hmin=<span class="built_in">min</span>(hmin,h[E[j].v]);</span><br><span class="line">			h[u]=hmin+<span class="number">1</span>;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;重贴标签后高度：&quot;</span>&lt;&lt;endl;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;h[]=&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;h[i];</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">			++g[h[u]];</span><br><span class="line">			<span class="keyword">if</span>(u!=s)</span><br><span class="line">				u=E[pre[u]^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;-------网络邻接表如下：-------&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;v&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; [&quot;</span>&lt;&lt;V[i].first;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=V[i].first;~j;j=E[j].next)</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;]--[&quot;</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;E[j].next;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;]&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=V[s].first;~i;i=E[i].next)</span><br><span class="line">		<span class="keyword">if</span>(E[i].cap&gt;E[i].flow)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(!dfsflag[u])</span><br><span class="line">			&#123;</span><br><span class="line">				dfsflag[u]=<span class="literal">true</span>;</span><br><span class="line">				<span class="built_in">DFS</span>(u);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最佳方案：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;选中的物品编号:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">DFS</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m*n;i++)</span><br><span class="line">		<span class="keyword">if</span>((flag[i]&amp;&amp;dfsflag[i])||(!flag[i]&amp;&amp;!dfsflag[i]))</span><br><span class="line">			cout&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m,sum=<span class="number">0</span>,total;</span><br><span class="line">	<span class="keyword">int</span> map[N][N];</span><br><span class="line">	<span class="built_in">memset</span>(flag,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(flag));</span><br><span class="line">	<span class="built_in">memset</span>(dfsflag,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(dfsflag));</span><br><span class="line">	<span class="keyword">int</span> dir[<span class="number">4</span>][<span class="number">2</span>]=&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入货架行数m和列数n:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	total=m*n;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;依次输入每行每个商品的价值:&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			cin&gt;&gt;map[i][j];</span><br><span class="line">			sum+=map[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>((i+j)%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">add</span>(<span class="number">0</span>,(i<span class="number">-1</span>)*n+j,map[i][j]);</span><br><span class="line">				flag[(i<span class="number">-1</span>)*n+j]=<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;<span class="number">4</span>;k++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">int</span> x=i+dir[k][<span class="number">0</span>];</span><br><span class="line">					<span class="keyword">int</span> y=j+dir[k][<span class="number">1</span>];</span><br><span class="line">					<span class="keyword">if</span>(x&lt;=m&amp;&amp;x&gt;<span class="number">0</span> &amp;&amp; y&lt;=n&amp;&amp;x&gt;<span class="number">0</span>)</span><br><span class="line">						<span class="built_in">add</span>((i<span class="number">-1</span>)*n+j,(x<span class="number">-1</span>)*n+y,INF);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="built_in">add</span>((i<span class="number">-1</span>)*n+j,total+<span class="number">1</span>,map[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最大价值：&quot;</span>&lt;&lt;sum-<span class="built_in">Isap</span>(<span class="number">0</span>,total+<span class="number">1</span>,total+<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">printg</span>(total+<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">print</span>(m,n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="旅游路线问题"><a href="#旅游路线问题" class="headerlink" title="旅游路线问题"></a>旅游路线问题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> dist[N],pre[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="keyword">int</span> c[N];</span><br><span class="line"><span class="keyword">int</span> maxflow,mincost;</span><br><span class="line">string str[M];</span><br><span class="line">map&lt;string,<span class="keyword">int</span>&gt; maze;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> first;</span><br><span class="line">&#125;V[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,next;</span><br><span class="line">	<span class="keyword">int</span> cap,flow,cost;</span><br><span class="line">&#125;E[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(V,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(V));</span><br><span class="line">	top=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c,<span class="keyword">int</span> cost)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	E[top].v=v;</span><br><span class="line">	E[top].cap=c;</span><br><span class="line">	E[top].flow=<span class="number">0</span>;</span><br><span class="line">	E[top].cost=cost;</span><br><span class="line">	E[top].next=V[u].first;</span><br><span class="line">	V[u].first=top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c,<span class="keyword">int</span> cost)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">add_edge</span>(u,v,c,cost);</span><br><span class="line">	<span class="built_in">add_edge</span>(v,u,<span class="number">0</span>,-cost);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,u,v;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; qu;</span><br><span class="line">	<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	<span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(c));</span><br><span class="line">	<span class="built_in">memset</span>(pre,<span class="number">-1</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(pre));</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		dist[i]=INF;</span><br><span class="line">	vis[s]=<span class="literal">true</span>;</span><br><span class="line">	c[s]++;</span><br><span class="line">	dist[s]=<span class="number">0</span>;</span><br><span class="line">	qu.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span>(!qu.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		u=qu.<span class="built_in">front</span>();</span><br><span class="line">		qu.<span class="built_in">pop</span>();</span><br><span class="line">		vis[u]=<span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=V[u].first;i!=<span class="number">-1</span>;i=E[i].next)</span><br><span class="line">		&#123;</span><br><span class="line">			v=E[i].v;</span><br><span class="line">			<span class="keyword">if</span>(E[i].cap&gt;E[i].flow&amp;&amp;dist[v]&gt;dist[u]+E[i].cost)</span><br><span class="line">			&#123;</span><br><span class="line">				dist[v]=dist[u]+E[i].cost;</span><br><span class="line">				pre[v]=i;</span><br><span class="line">				<span class="keyword">if</span>(!vis[v])</span><br><span class="line">				&#123;</span><br><span class="line">					c[v]++;</span><br><span class="line">					qu.<span class="built_in">push</span>(v);</span><br><span class="line">					vis[v]=<span class="literal">true</span>;</span><br><span class="line">					<span class="keyword">if</span>(c[v]&gt;n)</span><br><span class="line">						<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;最短路数组&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;dist[]=&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;dist[i];</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">if</span>(dist[t]==INF)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MCMF</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	maxflow=mincost=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">SPFA</span>(s,t,n))</span><br><span class="line">	&#123;</span><br><span class="line">		d=INF;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;增广路径：&quot;</span>&lt;&lt;t;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=pre[t];i!=<span class="number">-1</span>;i=pre[E[i^<span class="number">1</span>].v])</span><br><span class="line">		&#123;</span><br><span class="line">			d=<span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;E[i^<span class="number">1</span>].v;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;增流：&quot;</span>&lt;&lt;d&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=pre[t];i!=<span class="number">-1</span>;i=pre[E[i^<span class="number">1</span>].v])</span><br><span class="line">		&#123;</span><br><span class="line">			E[i].flow+=d;</span><br><span class="line">			E[i^<span class="number">1</span>].flow-=d;</span><br><span class="line">		&#125;</span><br><span class="line">		maxflow+=d;</span><br><span class="line">		mincost+=dist[t]*d;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> maxflow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> v;</span><br><span class="line">	vis[s]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=V[s].first;~i;i=E[i].next)</span><br><span class="line">		<span class="keyword">if</span>(!vis[v=E[i].v]&amp;&amp;((E[i].flow&gt;<span class="number">0</span>&amp;&amp;E[i].cost&lt;=<span class="number">0</span>)||(E[i].flow&lt;<span class="number">0</span>&amp;&amp;E[i].cost&gt;=<span class="number">0</span>)))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">print</span>(v,t);</span><br><span class="line">			<span class="keyword">if</span>(v&lt;=t)</span><br><span class="line">				cout&lt;&lt;str[v]&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,m,i;</span><br><span class="line">	string str1,str2;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入景点个数n和直达路线数m：&quot;</span>&lt;&lt;endl;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	maze.<span class="built_in">clear</span>();</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入景点名str&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;str[i];</span><br><span class="line">		maze[str[i]]=i;</span><br><span class="line">		<span class="keyword">if</span>(i==<span class="number">1</span>||i==n)</span><br><span class="line">			<span class="built_in">add</span>(i,i+n,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">add</span>(i,i+n,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;输入可以直接到达的两个景点名str1,str2&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cin&gt;&gt;str1&gt;&gt;str2;</span><br><span class="line">		<span class="keyword">int</span> a=maze[str1],b=maze[str2];</span><br><span class="line">		<span class="keyword">if</span>(a&lt;b)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(a==<span class="number">1</span>&amp;&amp;b==n)</span><br><span class="line">				<span class="built_in">add</span>(a+n,b,<span class="number">2</span>,<span class="number">-1</span>);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="built_in">add</span>(a+n,b,<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(b==<span class="number">1</span>&amp;&amp;a==n)</span><br><span class="line">				<span class="built_in">add</span>(b+n,a,<span class="number">2</span>,<span class="number">-1</span>);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="built_in">add</span>(b+n,a,<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">MCMF</span>(<span class="number">1</span>,<span class="number">2</span>*n,<span class="number">2</span>*n)==<span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;最多经过的景点个数：&quot;</span>&lt;&lt;-mincost&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;依次经过的景点：&quot;</span>&lt;&lt;endl;</span><br><span class="line">		cout&lt;&lt;str[<span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">		<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">		<span class="built_in">print</span>(<span class="number">1</span>,n);</span><br><span class="line">		cout&lt;&lt;str[<span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;no  solution!&quot;</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解题秘籍"><a href="#解题秘籍" class="headerlink" title="解题秘籍"></a>解题秘籍</h2><ol>
<li>如果可以使用网络，则构建网络图，如果需要添加源点和汇点则添加之，并确定每条边的容量。</li>
<li>如果可以用最大流解决，求解最大流就可以了。</li>
<li>问题的解不能直接用最大流解决，需要分析问题的解，是不是最小割容量，还是与最小割容量相关的表达式。最小割容量等于最大流值，所以可以通过求解最大流间接得到。</li>
<li>优的问题可以转化为最小费用最大流问题。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/12/28/algorithm/" data-id="ckxpgpo9h00027lllbkevbr2m" data-title="algorithm" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/12/28/vim/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Vim
        
      </div>
    </a>
  
  
    <a href="/2021/12/28/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/28/vim/">Vim</a>
          </li>
        
          <li>
            <a href="/2021/12/28/algorithm/">algorithm</a>
          </li>
        
          <li>
            <a href="/2021/12/28/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>